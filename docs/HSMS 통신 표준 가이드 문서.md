## ì œ 1ì¥: HSMS í‘œì¤€ì˜ ì´í•´

### 1.1 HSMSë€ ë¬´ì—‡ì¸ê°€?

HSMSëŠ” **H**igh-Speed SECS **M**essage **S**ervicesì˜ ì•½ìë¡œ, ë°˜ë„ì²´ ë° í‰íŒ ë””ìŠ¤í”Œë ˆì´ ì œì¡° ì¥ë¹„ì™€ í˜¸ìŠ¤íŠ¸(Host) ì»´í“¨í„° ê°„ì˜ í†µì‹ ì„ ìœ„í•´ ì •ì˜ëœ í‘œì¤€ í”„ë¡œí† ì½œì…ë‹ˆë‹¤. SEMI (Semiconductor Equipment and Materials International)ì— ì˜í•´ **E37** í‘œì¤€ìœ¼ë¡œ ì§€ì •ë˜ì–´ ìˆìŠµë‹ˆë‹¤.

ê¸°ì¡´ì˜ ì§ë ¬ í†µì‹ (RS-232C) ê¸°ë°˜ì¸ SECS-I (SEMI E4) í‘œì¤€ì€ ì†ë„ê°€ ëŠë¦¬ê³  ì¼ëŒ€ì¼ ì—°ê²°ë§Œ ê°€ëŠ¥í•˜ë‹¤ëŠ” í•œê³„ê°€ ìˆì—ˆìŠµë‹ˆë‹¤. HSMSëŠ” ì´ëŸ¬í•œ ë‹¨ì ì„ ê·¹ë³µí•˜ê¸° ìœ„í•´ **TCP/IP ì´ë”ë„·(Ethernet)** ê¸°ìˆ ì„ ê¸°ë°˜ìœ¼ë¡œ ì„¤ê³„ë˜ì—ˆìŠµë‹ˆë‹¤. ğŸš€

- **ì£¼ìš” íŠ¹ì§•**:
    
    - **ê³ ì† í†µì‹ **: TCP/IPë¥¼ ì‚¬ìš©í•˜ì—¬ ëŒ€ìš©ëŸ‰ ë°ì´í„°ë¥¼ ë¹ ë¥´ê³  ì•ˆì •ì ìœ¼ë¡œ ì „ì†¡í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
        
    - **ë‹¤ì¤‘ ì—°ê²°**: í•˜ë‚˜ì˜ í˜¸ìŠ¤íŠ¸ê°€ ì—¬ëŸ¬ ì¥ë¹„ì™€ ë™ì‹œì— í†µì‹ í•˜ëŠ” ê²ƒì´ ê°€ëŠ¥í•©ë‹ˆë‹¤.
        
    - **í‘œì¤€ ë„¤íŠ¸ì›Œí¬ ê¸°ìˆ **: ë„ë¦¬ ì‚¬ìš©ë˜ëŠ” ì´ë”ë„· ê¸°ìˆ ì„ ê¸°ë°˜ìœ¼ë¡œ í•˜ë¯€ë¡œ ìœ ì—°í•˜ê³  í™•ì¥ì„±ì´ ë›°ì–´ë‚©ë‹ˆë‹¤.
        

HSMSëŠ” SECS-II (SEMI E5) ë©”ì‹œì§€ì˜ 'ì „ì†¡ ìˆ˜ë‹¨' ì—­í• ì„ ë‹´ë‹¹í•©ë‹ˆë‹¤. ì¦‰, ì¥ë¹„ì™€ í˜¸ìŠ¤íŠ¸ê°€ ì£¼ê³ ë°›ëŠ” ì‹¤ì œ ë°ì´í„° ë‚´ìš©(ì˜ˆ: "ì‘ì—… ì‹œì‘", "ë°ì´í„° ë³´ê³ ")ì€ SECS-II í˜•ì‹ì— ë‹´ê²¨ ìˆê³ , HSMSëŠ” ì´ ë©”ì‹œì§€ ê¾¸ëŸ¬ë¯¸ë¥¼ TCP/IP ë„¤íŠ¸ì›Œí¬ë¥¼ í†µí•´ ì •í™•í•˜ê²Œ ë°°ë‹¬í•˜ëŠ” **ìš°í¸ ì‹œìŠ¤í…œ**ê³¼ ê°™ìŠµë‹ˆë‹¤.

### 1.2 Active Roleê³¼ Passive Roleì˜ í•µì‹¬ ê°œë…

HSMS í†µì‹ ì—ì„œëŠ” ì—°ê²°ì„ ë§ºëŠ” ê³¼ì •ì—ì„œ ë‘ ê°€ì§€ ëª…í™•í•œ ì—­í• ì´ ì¡´ì¬í•©ë‹ˆë‹¤. ì´ëŠ” í†µì‹ ì„ ëˆ„ê°€ ì‹œì‘í•˜ê³  ëˆ„ê°€ ê¸°ë‹¤ë¦¬ëŠ”ì§€ì— ë”°ë¼ êµ¬ë¶„ë©ë‹ˆë‹¤.

- **Active Role (ëŠ¥ë™ì  ì£¼ì²´)**
    
    - ì¼ë°˜ì ìœ¼ë¡œ **í˜¸ìŠ¤íŠ¸(Host)** ë˜ëŠ” MES(Manufacturing Execution System)ê°€ ì´ ì—­í• ì„ ë‹´ë‹¹í•©ë‹ˆë‹¤.
        
    - í†µì‹  ì—°ê²°ì„ **ì‹œì‘í•˜ê³  ìš”ì²­í•˜ëŠ”(Initiator)** ìª½ì…ë‹ˆë‹¤.
        
    - ë§ˆì¹˜ ì „í™”ë¥¼ ê±°ëŠ” ì‚¬ëŒì²˜ëŸ¼, Passive Roleì„ ê°€ì§„ ì¥ë¹„ì˜ íŠ¹ì • IP ì£¼ì†Œì™€ í¬íŠ¸ ë²ˆí˜¸ë¡œ ì ‘ì†ì„ ì‹œë„í•©ë‹ˆë‹¤.
        
    - **"Client"**ì˜ ê°œë…ê³¼ ìœ ì‚¬í•©ë‹ˆë‹¤.
        
- **Passive Role (ìˆ˜ë™ì  ê°ì²´)**
    
    - ì¼ë°˜ì ìœ¼ë¡œ **ì¥ë¹„(Equipment)**ê°€ ì´ ì—­í• ì„ ë‹´ë‹¹í•©ë‹ˆë‹¤.
        
    - ìì‹ ì˜ IP ì£¼ì†Œì™€ ì§€ì •ëœ í¬íŠ¸ ë²ˆí˜¸ë¥¼ ì—´ì–´ë‘ê³ , Active Roleì˜ ì—°ê²° ìš”ì²­ì„ **ê¸°ë‹¤ë¦¬ëŠ”(Listener)** ìª½ì…ë‹ˆë‹¤.
        
    - ë§ˆì¹˜ ì „í™”ë¥¼ ë°›ëŠ” ì‚¬ëŒì²˜ëŸ¼, ì™¸ë¶€ì˜ ì—°ê²° ìš”ì²­ì„ ìˆ˜ì‹ í•˜ê³  ìˆ˜ë½í•˜ì—¬ í†µì‹  ì„¸ì…˜ì„ ì‹œì‘í•©ë‹ˆë‹¤.
        
    - **"Server"**ì˜ ê°œë…ê³¼ ìœ ì‚¬í•©ë‹ˆë‹¤.
        

ì´ëŸ¬í•œ ì—­í•  êµ¬ë¶„ì€ HSMS í†µì‹ ì˜ ì‹œì‘ì ì„ ëª…í™•íˆ í•˜ì—¬ ì•ˆì •ì ì¸ ì—°ê²° ê´€ë¦¬ì˜ ê¸°ì´ˆê°€ ë©ë‹ˆë‹¤.

[LAN Network Diagram Vector Illustrator. ì´ë¯¸ì§€](https://encrypted-tbn0.gstatic.com/licensed-image?q=tbn:ANd9GcREWNB6MGdG2fSnvopkYModF3OG28Q-g8XeD_Z0LGSVLdkyRtkRUx7Cux8tzFFxdeYm3ouzEelxnh4AG6Mb5K9kKDUKFlVkjEaphjFU0XjddXolkQU)



---

## ì œ 2ì¥: HSMS ìƒíƒœ ëª¨ë¸ (State Machine)

HSMS í†µì‹ ì€ ëª…í™•í•˜ê²Œ ì •ì˜ëœ **ìƒíƒœ(State)**ë“¤ì„ ê°€ì§€ë©°, íŠ¹ì • ì´ë²¤íŠ¸ê°€ ë°œìƒí•  ë•Œë§ˆë‹¤ í•˜ë‚˜ì˜ ìƒíƒœì—ì„œ ë‹¤ë¥¸ ìƒíƒœë¡œ ì „í™˜ë©ë‹ˆë‹¤. ì´ ìƒíƒœ ëª¨ë¸ì„ ì´í•´í•˜ëŠ” ê²ƒì€ í†µì‹  í”„ë¡œí† ì½œì˜ ë™ì‘ì„ ì •í™•íˆ íŒŒì•…í•˜ê³  ì•ˆì •ì ì¸ ì†Œí”„íŠ¸ì›¨ì–´ë¥¼ êµ¬í˜„í•˜ëŠ” ë° í•„ìˆ˜ì ì…ë‹ˆë‹¤.

### 2.1 HSMSì˜ ì£¼ìš” ìƒíƒœ

HSMSì˜ ìƒíƒœëŠ” í¬ê²Œ **ì—°ê²°ë˜ì§€ ì•Šì€ ìƒíƒœ**ì™€ **ì—°ê²°ëœ ìƒíƒœ**ë¡œ ë‚˜ë‰©ë‹ˆë‹¤.

- **`NOT_CONNECTED`**: TCP/IP ì—°ê²°ì´ ìˆ˜ë¦½ë˜ì§€ ì•Šì€ ì´ˆê¸° ìƒíƒœ ë˜ëŠ” ì—°ê²°ì´ ëŠì–´ì§„ ìƒíƒœì…ë‹ˆë‹¤.
    
- **`CONNECTED`**: TCP/IP ì—°ê²°ì€ ìˆ˜ë¦½ë˜ì—ˆì§€ë§Œ, ì•„ì§ HSMS í†µì‹ ì„ ìœ„í•œ ì„¸ì…˜ì€ í™•ë¦½ë˜ì§€ ì•Šì€ ìƒíƒœì…ë‹ˆë‹¤. ì´ ìƒíƒœëŠ” ë‹¤ì‹œ ë‘ ê°œì˜ í•˜ìœ„ ìƒíƒœë¡œ ë‚˜ë‰©ë‹ˆë‹¤.
    
    - **`NOT_SELECTED`**: TCP/IP ì—°ê²°ì€ ë˜ì—ˆìœ¼ë‚˜, í†µì‹  ì£¼ì²´(Active)ê°€ ìì‹ ì„ ì‹ë³„í•˜ê³  í†µì‹ ì„ ì‹œì‘í•˜ê² ë‹¤ëŠ” `Select.req` ìš”ì²­ì„ ë³´ë‚´ê¸° ì „ì˜ ìƒíƒœì…ë‹ˆë‹¤.
        
    - **`SELECTED`**: Active Roleì´ ë³´ë‚¸ `Select.req`ë¥¼ Passive Roleì´ ì„±ê³µì ìœ¼ë¡œ ìˆ˜ì‹ í•˜ê³  ì‘ë‹µí•˜ì—¬, ì–‘ì¸¡ ê°„ì— ë°ì´í„° ë©”ì‹œì§€(SECS-II ë©”ì‹œì§€)ë¥¼ êµí™˜í•  ì¤€ë¹„ê°€ ì™„ë£Œëœ ìƒíƒœì…ë‹ˆë‹¤. ëª¨ë“  ë°ì´í„° í†µì‹ ì€ ì´ `SELECTED` ìƒíƒœì—ì„œë§Œ ì´ë£¨ì–´ì§‘ë‹ˆë‹¤.
        

### 2.2 [Passive Role] ìƒíƒœ ì „ì´ ëª¨ë¸

ì¥ë¹„(Passive Role)ëŠ” ì—°ê²° ìš”ì²­ì„ ê¸°ë‹¤ë¦¬ëŠ” ì…ì¥ì´ë¯€ë¡œ, ìƒíƒœ ë³€í™”ëŠ” ì£¼ë¡œ Active Roleì˜ ìš”ì²­ì— ì˜í•´ ë°œìƒí•©ë‹ˆë‹¤.


``` mermaid
stateDiagram-v2
    direction LR
    [*] --> NOT_CONNECTED
    NOT_CONNECTED --> CONNECTED: TCP ì—°ê²° ìš”ì²­ ìˆ˜ë½
    CONNECTED --> NOT_CONNECTED: TCP ì—°ê²° ëŠê¹€

    state CONNECTED {
        direction LR
        [*] --> NOT_SELECTED
        NOT_SELECTED --> SELECTED: ìœ íš¨í•œ Select.req ìˆ˜ì‹ 
        SELECTED --> NOT_SELECTED: Separate.req ìˆ˜ì‹ 
    }
```

- **`NOT_CONNECTED` -> `CONNECTED / NOT_SELECTED`**: Active ì¸¡(Host)ì—ì„œ TCP/IP ì—°ê²° ìš”ì²­ì´ ë“¤ì–´ì™€ ìˆ˜ë½(Accept)í•˜ë©´ ìƒíƒœê°€ ì „í™˜ë©ë‹ˆë‹¤.
    
- **`NOT_SELECTED` -> `SELECTED`**: Active ì¸¡ìœ¼ë¡œë¶€í„° ìœ íš¨í•œ `Select.req` ë©”ì‹œì§€ë¥¼ ìˆ˜ì‹ í•˜ê³ , ì„±ê³µ ì‘ë‹µ(`Select.rsp`)ì„ ë³´ë‚´ë©´ ë°ì´í„° êµí™˜ì´ ê°€ëŠ¥í•œ `SELECTED` ìƒíƒœê°€ ë©ë‹ˆë‹¤.
    
- **`SELECTED` -> `NOT_SELECTED`**: Active ì¸¡ìœ¼ë¡œë¶€í„° ì—°ê²° ì¢…ë£Œë¥¼ ì˜ë¯¸í•˜ëŠ” `Separate.req` ë©”ì‹œì§€ë¥¼ ë°›ìœ¼ë©´ ì„¸ì…˜ì´ ì¢…ë£Œë˜ê³  `NOT_SELECTED` ìƒíƒœë¡œ ëŒì•„ê°‘ë‹ˆë‹¤.
    
- **`CONNECTED` -> `NOT_CONNECTED`**: ì–´ë–¤ ì´ìœ ë¡œë“ (ì •ìƒ ì¢…ë£Œ, ë„¤íŠ¸ì›Œí¬ ë‹¨ì ˆ ë“±) TCP/IP ì—°ê²°ì´ ëŠì–´ì§€ë©´ ì´ˆê¸° ìƒíƒœì¸ `NOT_CONNECTED`ë¡œ ëŒì•„ê°‘ë‹ˆë‹¤.
    

### 2.3 [Active Role] ìƒíƒœ ì „ì´ ëª¨ë¸

í˜¸ìŠ¤íŠ¸(Active Role)ëŠ” ì—°ê²°ì„ ì£¼ë„í•˜ëŠ” ì…ì¥ì´ë¯€ë¡œ, ìì‹ ì˜ ìš”ì²­ê³¼ ìƒëŒ€ë°©ì˜ ì‘ë‹µì— ë”°ë¼ ìƒíƒœê°€ ë³€í™”í•©ë‹ˆë‹¤.


``` mermaid
stateDiagram-v2
    direction LR
    [*] --> NOT_CONNECTED
    NOT_CONNECTED --> CONNECTED: TCP ì—°ê²° ì„±ê³µ
    CONNECTED --> NOT_CONNECTED: TCP ì—°ê²° ëŠê¹€

    state CONNECTED {
        direction LR
        [*] --> NOT_SELECTED
        NOT_SELECTED --> SELECTED: Select.rsp(ì„±ê³µ) ìˆ˜ì‹ 
        SELECTED --> NOT_SELECTED: Separate.req ì „ì†¡
        NOT_SELECTED --> NOT_CONNECTED: T7 Timeout ë°œìƒ
    }
```

- **`NOT_CONNECTED` -> `CONNECTED / NOT_SELECTED`**: Passive ì¸¡(ì¥ë¹„)ì— TCP/IP ì—°ê²°ì„ ì‹œë„(Connect)í•˜ì—¬ ì„±ê³µí•˜ë©´ ìƒíƒœê°€ ì „í™˜ë©ë‹ˆë‹¤. ì´í›„ ì¦‰ì‹œ `Select.req`ë¥¼ ì „ì†¡í•˜ì—¬ ì„¸ì…˜ ìˆ˜ë¦½ì„ ì‹œë„í•©ë‹ˆë‹¤.
    
- **`NOT_SELECTED` -> `SELECTED`**: `Select.req` ì „ì†¡ í›„, Passive ì¸¡ìœ¼ë¡œë¶€í„° ì„±ê³µì ì¸ ì‘ë‹µ(`Select.rsp`)ì„ ë°›ìœ¼ë©´ ë°ì´í„° êµí™˜ì´ ê°€ëŠ¥í•œ `SELECTED` ìƒíƒœê°€ ë©ë‹ˆë‹¤.
    
- **`NOT_SELECTED` -> `NOT_CONNECTED`**: `Select.req`ë¥¼ ë³´ëƒˆìœ¼ë‚˜ ì¼ì • ì‹œê°„(T7 Timeout) ë‚´ì— ì‘ë‹µì´ ì˜¤ì§€ ì•Šìœ¼ë©´ ì—°ê²°ì— ë¬¸ì œê°€ ìˆë‹¤ê³  íŒë‹¨í•˜ì—¬ TCP/IP ì—°ê²°ì„ ëŠê³  `NOT_CONNECTED` ìƒíƒœë¡œ ëŒì•„ê°‘ë‹ˆë‹¤.
    
- **`SELECTED` -> `NOT_SELECTED`**: í†µì‹  ì¢…ë£Œë¥¼ ìœ„í•´ `Separate.req` ë©”ì‹œì§€ë¥¼ ì „ì†¡í•˜ë©´ ì„¸ì…˜ ì¢…ë£Œë¥¼ ì‹œì‘í•˜ë©°, ì´í›„ TCP/IP ì—°ê²°ì„ ëŠê²Œ ë©ë‹ˆë‹¤.
    
- **`CONNECTED` -> `NOT_CONNECTED`**: TCP/IP ì—°ê²°ì´ ëŠì–´ì§€ë©´ `NOT_CONNECTED` ìƒíƒœë¡œ ëŒì•„ê°€ë©°, ë³´í†µ ì •í•´ì§„ ë¡œì§ì— ë”°ë¼ ì¬ì—°ê²°ì„ ì‹œë„í•©ë‹ˆë‹¤.
    

---

## ì œ 3ì¥: [Passive Role] í†µì‹  ì¤€ë¹„ ë° ì—°ê²° ëŒ€ê¸°

Passive Roleì„ ë‹´ë‹¹í•˜ëŠ” ì¥ë¹„ëŠ” Active Role(í˜¸ìŠ¤íŠ¸)ì´ ì–¸ì œë“ ì§€ ì ‘ì†í•  ìˆ˜ ìˆë„ë¡ í†µì‹  ì±„ë„ì„ ì—´ê³  ëŒ€ê¸° ìƒíƒœë¥¼ ìœ ì§€í•´ì•¼ í•©ë‹ˆë‹¤. ì´ ê³¼ì •ì€ TCP/IP ì†Œì¼“ í”„ë¡œê·¸ë˜ë°ì˜ ì„œë²„(Server) ëª¨ë¸ê³¼ ë§¤ìš° ìœ ì‚¬í•©ë‹ˆë‹¤.

### 3.1 Passive ì¸¡ì˜ í†µì‹  ì„¤ì •

ê°€ì¥ ë¨¼ì €, ì¥ë¹„ëŠ” í†µì‹ ì„ ìœ„í•œ ê¸°ë³¸ì ì¸ ë„¤íŠ¸ì›Œí¬ ì •ë³´ë¥¼ ì„¤ì •í•´ì•¼ í•©ë‹ˆë‹¤.

- **IP ì£¼ì†Œ**: ì¥ë¹„ê°€ ë„¤íŠ¸ì›Œí¬ ìƒì—ì„œ ì‹ë³„ë  ìˆ˜ ìˆëŠ” ê³ ìœ í•œ ì£¼ì†Œì…ë‹ˆë‹¤. ì´ ì£¼ì†ŒëŠ” ê³ ì • IPë¥¼ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ ì¼ë°˜ì ì…ë‹ˆë‹¤.
    
- **Port ë²ˆí˜¸**: í•˜ë‚˜ì˜ IP ì£¼ì†Œ ë‚´ì—ì„œ íŠ¹ì • í†µì‹  í”„ë¡œê·¸ë¨ì„ êµ¬ë¶„í•˜ê¸° ìœ„í•œ ë…¼ë¦¬ì ì¸ ë²ˆí˜¸ì…ë‹ˆë‹¤. HSMS í‘œì¤€ì—ì„œëŠ” íŠ¹ë³„íˆ ì •í•´ì§„ í¬íŠ¸ëŠ” ì—†ìœ¼ë‚˜, ì¼ë°˜ì ìœ¼ë¡œ **5000ë²ˆ ì´ìƒ**ì˜ í¬íŠ¸ê°€ ê´€ë¡€ì ìœ¼ë¡œ ì‚¬ìš©ë©ë‹ˆë‹¤. (ì˜ˆ: 5000, 5001 ë“±)
    

ì´ IPì™€ Port ì •ë³´ëŠ” Active Role(í˜¸ìŠ¤íŠ¸)ì´ ì—°ê²°ì„ ì‹œë„í•  ë•Œ ì‚¬ìš©í•˜ëŠ” ëª©ì ì§€ ì£¼ì†Œê°€ ë©ë‹ˆë‹¤.

### 3.2 ì†Œì¼“(Socket) ìƒì„± ë° ì—°ê²° ëŒ€ê¸° ê³¼ì •

ì¥ë¹„ì˜ í†µì‹  í”„ë¡œê·¸ë¨ì€ ë‹¤ìŒì˜ ì ˆì°¨ë¥¼ í†µí•´ ì—°ê²° ëŒ€ê¸° ìƒíƒœì— ë“¤ì–´ê°‘ë‹ˆë‹¤.

1. **ì†Œì¼“ ìƒì„± (Socket Creation)**
    
    - í†µì‹ ì„ ìœ„í•œ Endpoint, ì¦‰ ì°½êµ¬ë¥¼ ë§Œë“œëŠ” ë‹¨ê³„ì…ë‹ˆë‹¤. TCP/IP í†µì‹ ì„ ìœ„í•œ ìŠ¤íŠ¸ë¦¼(Stream) íƒ€ì…ì˜ ì†Œì¼“ì„ ìƒì„±í•©ë‹ˆë‹¤.
        
2. **ë°”ì¸ë”© (Binding)**
    
    - ìƒì„±ëœ ì†Œì¼“ì„ ìœ„ì—ì„œ ì„¤ì •í•œ ì¥ë¹„ì˜ **IP ì£¼ì†Œì™€ Port ë²ˆí˜¸ì— í• ë‹¹**í•˜ëŠ” ê³¼ì •ì…ë‹ˆë‹¤. "ì´ ì†Œì¼“ì€ `192.168.0.10`ì˜ `5000`ë²ˆ í¬íŠ¸ë¥¼ í†µí•´ ë“¤ì–´ì˜¤ëŠ” í†µì‹ ì„ ë‹´ë‹¹í•œë‹¤"ë¼ê³  ì§€ì •í•˜ëŠ” ê²ƒê³¼ ê°™ìŠµë‹ˆë‹¤.
        
3. **ë¦¬ìŠ¨ (Listening)**
    
    - ë°”ì¸ë”©ëœ ì†Œì¼“ì„ í†µí•´ ì™¸ë¶€(Active Role)ë¡œë¶€í„°ì˜ ì—°ê²° ìš”ì²­ì„ ë°›ì„ ìˆ˜ ìˆë„ë¡ **ëŒ€ê¸° ëª¨ë“œë¡œ ì „í™˜**í•©ë‹ˆë‹¤. ì´ ì‹œì ë¶€í„° ì¥ë¹„ëŠ” í˜¸ìŠ¤íŠ¸ì˜ ì ‘ì†ì„ ê¸°ë‹¤ë¦¬ê²Œ ë©ë‹ˆë‹¤.
        
    - ë™ì‹œì— ì—¬ëŸ¬ ì—°ê²° ìš”ì²­ì´ ë“¤ì–´ì˜¬ ê²½ìš°ë¥¼ ëŒ€ë¹„í•´ ëŒ€ê¸° í(Queue)ì˜ í¬ê¸°ë¥¼ ì„¤ì •í•˜ê¸°ë„ í•©ë‹ˆë‹¤.
        

### 3.3 ì—°ê²° ìš”ì²­ ìˆ˜ë½ (Accept)

`Listen` ìƒíƒœì—ì„œ í˜¸ìŠ¤íŠ¸ê°€ ì˜¬ë°”ë¥¸ IPì™€ Portë¡œ ì—°ê²°ì„ ìš”ì²­í•˜ë©´, ì¥ë¹„ì˜ ìš´ì˜ì²´ì œëŠ” ì´ë¥¼ ê°ì§€í•©ë‹ˆë‹¤. í†µì‹  í”„ë¡œê·¸ë¨ì€ `Accept` í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•˜ì—¬ ì´ ì—°ê²° ìš”ì²­ì„ ìˆ˜ë½í•©ë‹ˆë‹¤.

ì—°ê²°ì´ ìˆ˜ë½ë˜ë©´, **ìƒˆë¡œìš´ í†µì‹ ìš© ì†Œì¼“**ì´ ìƒì„±ë©ë‹ˆë‹¤. ì´ ìƒˆë¡œìš´ ì†Œì¼“ì„ í†µí•´ í•´ë‹¹ í˜¸ìŠ¤íŠ¸ì™€ì˜ ì‹¤ì œ ë°ì´í„° ì†¡ìˆ˜ì‹ ì´ ì´ë£¨ì–´ì§‘ë‹ˆë‹¤. ê¸°ì¡´ì— `Listen`í•˜ë˜ ì†Œì¼“ì€ ê³„ì†í•´ì„œ ë‹¤ë¥¸ í˜¸ìŠ¤íŠ¸ì˜ ì—°ê²° ìš”ì²­ì„ ê¸°ë‹¤ë¦¬ëŠ” ì—­í• ì„ ìˆ˜í–‰í•©ë‹ˆë‹¤.

ì´ë¡œì¨ ì¥ë¹„ëŠ” `NOT_CONNECTED` ìƒíƒœì—ì„œ `CONNECTED / NOT_SELECTED` ìƒíƒœë¡œ ì „í™˜ë˜ë©°, í˜¸ìŠ¤íŠ¸ë¡œë¶€í„° `Select.req` ë©”ì‹œì§€ê°€ ì˜¤ê¸°ë¥¼ ê¸°ë‹¤ë¦½ë‹ˆë‹¤.

### 3.4 ì£¼ìš” íŒŒë¼ë¯¸í„°: T5 (Connection Separation Timeout)

- **T5 (Connection Separation Timeout)**
    
    - HSMS ë©”ì‹œì§€ ì†¡ìˆ˜ì‹ ì´ **ì „í˜€ ì—†ëŠ” ìƒíƒœ**ê°€ T5ì— ì„¤ì •ëœ ì‹œê°„ë§Œí¼ ì§€ì†ë˜ë©´, ì¥ë¹„ëŠ” í†µì‹  ì±„ë„ì— ë¬¸ì œê°€ ë°œìƒí–ˆë‹¤ê³  ê°„ì£¼í•˜ê³  ìŠ¤ìŠ¤ë¡œ TCP/IP ì—°ê²°ì„ ëŠìŠµë‹ˆë‹¤.
        
    - ì´ëŠ” ë¹„ì •ìƒì ìœ¼ë¡œ ì—°ê²°ì´ ìœ ì§€ë˜ëŠ” "ì¢€ë¹„ ì»¤ë„¥ì…˜(Zombie Connection)"ì„ ë°©ì§€í•˜ê³  ì‹œìŠ¤í…œ ìì›ì„ ë³´í˜¸í•˜ëŠ” ì¤‘ìš”í•œ ì—­í• ì„ í•©ë‹ˆë‹¤.
        
    - ì¼ë°˜ì ìœ¼ë¡œ **10ì´ˆ** ë‚´ì™¸ë¡œ ì„¤ì •ë©ë‹ˆë‹¤.
        


---

## ì œ 4ì¥: [Active Role] ì—°ê²° ìš”ì²­ ë° ì„¸ì…˜ ìˆ˜ë¦½

Active Roleì„ ë‹´ë‹¹í•˜ëŠ” í˜¸ìŠ¤íŠ¸ëŠ” í†µì‹ ì˜ ì‹œì‘ì„ ì±…ì„ì§‘ë‹ˆë‹¤. ì¥ë¹„(Passive Role)ê°€ ì—´ì–´ë†“ì€ í†µì‹  ì±„ë„ë¡œ ì •í™•í•˜ê²Œ ì ‘ì†ì„ ì‹œë„í•˜ê³ , HSMS ì„¸ì…˜ì„ ê³µì‹ì ìœ¼ë¡œ ìˆ˜ë¦½í•˜ëŠ” ì—­í• ì„ ìˆ˜í–‰í•©ë‹ˆë‹¤.

### 4.1 Active ì¸¡ì˜ í†µì‹  ì„¤ì •

í˜¸ìŠ¤íŠ¸ëŠ” ì ‘ì†í•  ëŒ€ìƒ, ì¦‰ ì¥ë¹„ì˜ ë„¤íŠ¸ì›Œí¬ ì •ë³´ë¥¼ ëª…í™•íˆ ì•Œê³  ìˆì–´ì•¼ í•©ë‹ˆë‹¤.

- **Target IP ì£¼ì†Œ**: ì ‘ì†í•˜ê³ ì í•˜ëŠ” ì¥ë¹„ì˜ ê³ ìœ  IP ì£¼ì†Œì…ë‹ˆë‹¤.
    
- **Target Port ë²ˆí˜¸**: í•´ë‹¹ ì¥ë¹„ê°€ HSMS í†µì‹ ì„ ìœ„í•´ ì—´ì–´ë†“ì€(Listen) í¬íŠ¸ ë²ˆí˜¸ì…ë‹ˆë‹¤.
    

ì´ ë‘ ì •ë³´ê°€ ìˆì–´ì•¼ë§Œ í˜¸ìŠ¤íŠ¸ëŠ” í†µì‹ ì„ ì‹œì‘í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ğŸ“

### 4.2 ì†Œì¼“ ìƒì„± ë° ì—°ê²° ì‹œë„

í˜¸ìŠ¤íŠ¸ì˜ í†µì‹  í”„ë¡œê·¸ë¨ì€ ë‹¤ìŒ ì ˆì°¨ì— ë”°ë¼ ì¥ë¹„ì— ì—°ê²°ì„ ì‹œë„í•©ë‹ˆë‹¤.

1. **ì†Œì¼“ ìƒì„± (Socket Creation)**
    
    - ì¥ë¹„ì™€ ë§ˆì°¬ê°€ì§€ë¡œ TCP/IP í†µì‹ ì„ ìœ„í•œ ì†Œì¼“ì„ ìƒì„±í•©ë‹ˆë‹¤.
        
2. **ì—°ê²° ì‹œë„ (Connect)**
    
    - ìƒì„±ëœ ì†Œì¼“ì„ ì‚¬ìš©í•˜ì—¬ ì„¤ì •ëœ **Target IPì™€ Portë¡œ ì ‘ì†ì„ ì‹œë„**í•©ë‹ˆë‹¤. ì´ `Connect` ê³¼ì •ì´ ë°”ë¡œ Active Roleì˜ í•µì‹¬ ë™ì‘ì…ë‹ˆë‹¤.
        
    - **ì„±ê³µ**: ì¥ë¹„ê°€ í•´ë‹¹ ìš”ì²­ì„ `Accept`í•˜ë©´ TCP/IP ì—°ê²°ì´ ì„±ê³µì ìœ¼ë¡œ ìˆ˜ë¦½ë˜ê³ , í˜¸ìŠ¤íŠ¸ì˜ ìƒíƒœëŠ” `NOT_CONNECTED`ì—ì„œ `CONNECTED / NOT_SELECTED`ë¡œ ì „í™˜ë©ë‹ˆë‹¤.
        
    - **ì‹¤íŒ¨**: ì¥ë¹„ê°€ êº¼ì ¸ ìˆê±°ë‚˜, ë„¤íŠ¸ì›Œí¬ ë¬¸ì œ, í˜¹ì€ IP/Port ì •ë³´ê°€ ì˜ëª»ëœ ê²½ìš° ì—°ê²°ì€ ì‹¤íŒ¨í•©ë‹ˆë‹¤. ì´ ê²½ìš°, í˜¸ìŠ¤íŠ¸ëŠ” ë³´í†µ ì¼ì • ì‹œê°„ ê°„ê²©ì„ ë‘ê³  ì¬ì—°ê²°ì„ ì‹œë„í•˜ëŠ” ë¡œì§ì„ ê°€ì§‘ë‹ˆë‹¤.
        

### 4.3 `Select.req` ì „ì†¡ê³¼ ì„¸ì…˜ ìˆ˜ë¦½

TCP/IP ì—°ê²°ì´ ì„±ê³µì ìœ¼ë¡œ ì´ë£¨ì–´ì¡Œë‹¤ê³  í•´ì„œ ë°”ë¡œ ë°ì´í„°(SECS-II ë©”ì‹œì§€)ë¥¼ êµí™˜í•  ìˆ˜ ìˆëŠ” ê²ƒì€ ì•„ë‹™ë‹ˆë‹¤. í˜¸ìŠ¤íŠ¸ëŠ” ìì‹ ì´ ëˆ„êµ¬ì´ë©° í†µì‹ í•  ì¤€ë¹„ê°€ ë˜ì—ˆìŒì„ ì¥ë¹„ì—ê²Œ ê³µì‹ì ìœ¼ë¡œ ì•Œë ¤ì•¼ í•©ë‹ˆë‹¤. ì´ ê³¼ì •ì—ì„œ `Select.req` ì œì–´ ë©”ì‹œì§€ë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤.

- **`Select.req` ì „ì†¡**: TCP/IP ì—°ê²°ì´ ìˆ˜ë¦½ë˜ë©´, í˜¸ìŠ¤íŠ¸ëŠ” ì¦‰ì‹œ ì¥ë¹„ì—ê²Œ `Select.req` ë©”ì‹œì§€ë¥¼ ì „ì†¡í•©ë‹ˆë‹¤. ì´ ë©”ì‹œì§€ëŠ” "ì´ì œë¶€í„° ë‹¹ì‹ ê³¼ HSMS í†µì‹ ì„ ì‹œì‘í•˜ê² ìŠµë‹ˆë‹¤"ë¼ëŠ” ê³µì‹ì ì¸ ìš”ì²­ì…ë‹ˆë‹¤.
    
- **`Select.rsp` ìˆ˜ì‹ **: `Select.req`ë¥¼ ë°›ì€ ì¥ë¹„ëŠ” ìš”ì²­ì„ ì²˜ë¦¬í•œ í›„ ì‘ë‹µìœ¼ë¡œ `Select.rsp` ë©”ì‹œì§€ë¥¼ ë³´ëƒ…ë‹ˆë‹¤.
    
    - **ì„±ê³µ ì‘ë‹µ**: `Select.rsp`ì— ì„±ê³µ ì½”ë“œê°€ í¬í•¨ë˜ì–´ ìˆìœ¼ë©´, ë¹„ë¡œì†Œ ì–‘ì¸¡ì€ `SELECTED` ìƒíƒœë¡œ ì§„ì…í•©ë‹ˆë‹¤. ì´ì œë¶€í„° ì‹¤ì œ ë°ì´í„° ë©”ì‹œì§€ë¥¼ êµí™˜í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
        
    - **ì‹¤íŒ¨ ì‘ë‹µ**: ì¥ë¹„ê°€ ì´ë¯¸ ë‹¤ë¥¸ í˜¸ìŠ¤íŠ¸ì™€ í†µì‹  ì¤‘ì´ê±°ë‚˜ ë‹¤ë¥¸ ì´ìœ ë¡œ ìš”ì²­ì„ ê±°ì ˆí•˜ë©´ ì‹¤íŒ¨ ì½”ë“œê°€ ë‹´ê¸´ `Select.rsp`ê°€ ì˜¤ê²Œ ë˜ê³ , í˜¸ìŠ¤íŠ¸ëŠ” `SELECTED` ìƒíƒœë¡œ ì§„ì…í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.
        

### 4.4 ì£¼ìš” íŒŒë¼ë¯¸í„°: T7, T8

- **T7 (Not Selected Timeout)**
    
    - Active Roleì´ `Select.req`ë¥¼ ë³´ë‚¸ í›„ `Select.rsp` ì‘ë‹µì„ ê¸°ë‹¤ë¦¬ëŠ” **ìµœëŒ€ ì‹œê°„**ì…ë‹ˆë‹¤. ë§Œì•½ ì´ ì‹œê°„ ë‚´ì— ì‘ë‹µì´ ë„ì°©í•˜ì§€ ì•Šìœ¼ë©´, í˜¸ìŠ¤íŠ¸ëŠ” í†µì‹  ì„¸ì…˜ ìˆ˜ë¦½ì— ì‹¤íŒ¨í–ˆë‹¤ê³  íŒë‹¨í•˜ê³  TCP/IP ì—°ê²°ì„ ëŠì€ í›„ `NOT_CONNECTED` ìƒíƒœë¡œ ëŒì•„ê°‘ë‹ˆë‹¤. ì¼ë°˜ì ìœ¼ë¡œ **10ì´ˆ** ë‚´ì™¸ë¡œ ì„¤ì •ë©ë‹ˆë‹¤.
        
- **T8 (Network Inter-character Timeout)**
    
    - í•˜ë‚˜ì˜ ì™„ì „í•œ HSMS ë©”ì‹œì§€ë¥¼ ìˆ˜ì‹ í•  ë•Œ, ë©”ì‹œì§€ì˜ ê° ë°ì´í„° íŒ¨í‚·(ì¡°ê°) ì‚¬ì´ì˜ ìµœëŒ€ ì§€ì—° ì‹œê°„ì„ ì˜ë¯¸í•©ë‹ˆë‹¤. ë§Œì•½ ë©”ì‹œì§€ ìˆ˜ì‹  ì¤‘ ì´ ì‹œê°„ì„ ì´ˆê³¼í•˜ë©´ ë©”ì‹œì§€ê°€ ë¹„ì •ìƒì ìœ¼ë¡œ ì „ì†¡ëœ ê²ƒìœ¼ë¡œ ê°„ì£¼í•˜ê³  í•´ë‹¹ ë©”ì‹œì§€ë¥¼ íê¸°í•©ë‹ˆë‹¤. ë„¤íŠ¸ì›Œí¬ ì•ˆì •ì„±ì„ í™•ë³´í•˜ê¸° ìœ„í•œ íŒŒë¼ë¯¸í„°ì…ë‹ˆë‹¤.
        

---

### ## 5.1 í†µì‹  ì—°ê²° ìˆ˜ë¦½ ì ˆì°¨ (Sequence)

ì •ìƒì ì¸ HSMS í†µì‹  ì—°ê²°ì€ í¬ê²Œ **TCP/IP ì—°ê²° ë‹¨ê³„**ì™€ **HSMS ì„¸ì…˜ ìˆ˜ë¦½ ë‹¨ê³„**ë¡œ ë‚˜ë‰©ë‹ˆë‹¤. ì•„ë˜ ë‹¤ì´ì–´ê·¸ë¨ì€ ì´ ê³¼ì •ì„ ì‹œê°„ ìˆœì„œì— ë”°ë¼ ë³´ì—¬ì¤ë‹ˆë‹¤.



``` mermaid
sequenceDiagram
    participant Active Role (Host)
    participant Passive Role (Equipment)

    Note over Active Role (Host), Passive Role (Equipment): ì´ˆê¸° ìƒíƒœ: NOT_CONNECTED

    Active Role (Host)->>Passive Role (Equipment): 1. TCP/IP ì—°ê²° ìš”ì²­ (Connect)
    Note right of Passive Role (Equipment): Listen ìƒíƒœì—ì„œ ìš”ì²­ ìˆ˜ì‹ 
    Passive Role (Equipment)-->>Active Role (Host): 2. TCP/IP ì—°ê²° ìˆ˜ë½ (Accept)

    Note over Active Role (Host), Passive Role (Equipment): ìƒíƒœ: CONNECTED / NOT_SELECTED

    Active Role (Host)->>Passive Role (Equipment): 3. HSMS ì„¸ì…˜ ìš”ì²­ (Select.req)
    Passive Role (Equipment)-->>Active Role (Host): 4. HSMS ì„¸ì…˜ ì‘ë‹µ (Select.rsp)

    Note over Active Role (Host), Passive Role (Equipment): ìƒíƒœ: SELECTED (ë°ì´í„° êµí™˜ ê°€ëŠ¥)

    Active Role (Host)->>Passive Role (Equipment): Data Message (S1F13 ë“±)
    Passive Role (Equipment)-->>Active Role (Host): Data Message (S1F14 ë“±)
```

1. **TCP/IP ì—°ê²° ìš”ì²­**: **Active Role(Host)**ì´ **Passive Role(Equipment)**ì˜ IPì™€ Portë¡œ TCP/IP ì—°ê²°ì„ ì‹œë„í•©ë‹ˆë‹¤.
    
2. **TCP/IP ì—°ê²° ìˆ˜ë½**: **Passive Role**ì€ `Listen` ìƒíƒœì—ì„œ ì´ ìš”ì²­ì„ ë°›ì•„ë“¤ì´ê³ , ì–‘ì¸¡ ê°„ì— ë„¤íŠ¸ì›Œí¬ ê²½ë¡œê°€ ì—´ë¦½ë‹ˆë‹¤. ì´ ì‹œì ë¶€í„° ë‘ ì—­í•  ëª¨ë‘ `CONNECTED / NOT_SELECTED` ìƒíƒœê°€ ë©ë‹ˆë‹¤.
    
3. **HSMS ì„¸ì…˜ ìš”ì²­**: ì—°ê²°ì´ ìˆ˜ë¦½ë˜ë©´ **Active Role**ì€ í†µì‹ ì„ ê°œì‹œí•˜ê² ë‹¤ëŠ” ì˜ë¯¸ë¡œ `Select.req` ë©”ì‹œì§€ë¥¼ ë³´ëƒ…ë‹ˆë‹¤.
    
4. **HSMS ì„¸ì…˜ ì‘ë‹µ**: **Passive Role**ì€ ì´ ìš”ì²­ì´ ìœ íš¨í•œì§€ í™•ì¸í•˜ê³  `Select.rsp`ë¡œ ì‘ë‹µí•©ë‹ˆë‹¤. ì„±ê³µ ì‘ë‹µì„ ë³´ë‚´ë©´, ì–‘ì¸¡ ëª¨ë‘ ë°ì´í„°ë¥¼ ì£¼ê³ ë°›ì„ ìˆ˜ ìˆëŠ” ìµœì¢… ë‹¨ê³„ì¸ **`SELECTED` ìƒíƒœ**ë¡œ ì „í™˜ë©ë‹ˆë‹¤.
    

---

### ## 5.2 ì •ìƒì ì¸ í†µì‹  í•´ì œ ì ˆì°¨

í†µì‹ ì„ ì •ìƒì ìœ¼ë¡œ ì¢…ë£Œí•  ë•ŒëŠ” `Separate.req` ì œì–´ ë©”ì‹œì§€ê°€ ì‚¬ìš©ë©ë‹ˆë‹¤. ì´ëŠ” "ì´ì œ í†µì‹ ì„ ë§ˆì¹˜ê² ìŠµë‹ˆë‹¤"ë¼ëŠ” ì‹ í˜¸ì™€ ê°™ìŠµë‹ˆë‹¤.

- ì¼ë°˜ì ìœ¼ë¡œ **Active Role**ì´ `Separate.req` ë©”ì‹œì§€ë¥¼ **Passive Role**ì—ê²Œ ë³´ëƒ…ë‹ˆë‹¤.
    
- `Separate.req`ë¥¼ ë°›ì€ **Passive Role**ì€ `SELECTED` ìƒíƒœì—ì„œ `NOT_SELECTED` ìƒíƒœë¡œ ëŒì•„ê°‘ë‹ˆë‹¤.
    
- ì´í›„, í†µì‹ ì„ ì‹œì‘í–ˆë˜ **Active Role**ì´ ìµœì¢…ì ìœ¼ë¡œ TCP/IP ì—°ê²°ì„ ëŠìŠµë‹ˆë‹¤(Disconnect).
    

ì´ëŸ¬í•œ ì ˆì°¨ëŠ” ì–‘ì¸¡ì´ í†µì‹  ì¢…ë£Œë¥¼ ëª…í™•í•˜ê²Œ ì¸ì§€í•˜ê³  ìì›ì„ ì•ˆì „í•˜ê²Œ í•´ì œí•  ìˆ˜ ìˆë„ë¡ ë³´ì¥í•©ë‹ˆë‹¤.

---

### ## 5.3 ë¹„ì •ìƒì ì¸ ì—°ê²° í•´ì œ

ë„¤íŠ¸ì›Œí¬ ì¼€ì´ë¸”ì´ ë½‘íˆê±°ë‚˜, ì¥ë¹„/í˜¸ìŠ¤íŠ¸ì˜ ì „ì›ì´ ê°‘ìê¸° êº¼ì§€ëŠ” ë“± ì˜ˆê¸°ì¹˜ ëª»í•œ ìƒí™©ìœ¼ë¡œ TCP/IP ì—°ê²°ì´ ëŠì–´ì§ˆ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

- ì´ ê²½ìš°, `Separate.req`ì™€ ê°™ì€ ì •ìƒì ì¸ ì ˆì°¨ ì—†ì´ ì—°ê²°ì´ ë‹¨ì ˆë©ë‹ˆë‹¤.
    
- ìš´ì˜ì²´ì œ(OS)ì˜ ì†Œì¼“ ì‹œìŠ¤í…œì€ ì´ ë‹¨ì ˆì„ ê°ì§€í•˜ê³ , í†µì‹  í”„ë¡œê·¸ë¨ì€ `NOT_CONNECTED` ìƒíƒœë¡œ ì¦‰ì‹œ ë³µê·€í•©ë‹ˆë‹¤.
    
- **Active Role**ì€ ë³´í†µ ì´ëŸ° ë¹„ì •ìƒì ì¸ ë‹¨ì ˆì„ ê°ì§€í•˜ë©´, ì ì‹œ í›„ ë‹¤ì‹œ ì—°ê²°ì„ ì‹œë„í•˜ëŠ” ì¬ì—°ê²° ë¡œì§ì„ ìˆ˜í–‰í•©ë‹ˆë‹¤. (ì´ëŠ” 9ì¥ì—ì„œ ìì„¸íˆ ë‹¤ë£¹ë‹ˆë‹¤.)
    
ë„¤, ë°”ë¡œ **ì œ 6ì¥ 'ë°ì´í„° ë©”ì‹œì§€ êµí™˜'**ìœ¼ë¡œ ë„˜ì–´ê°€ê² ìŠµë‹ˆë‹¤. `SELECTED` ìƒíƒœê°€ ëœ í›„ ì‹¤ì œë¡œ ì–´ë–»ê²Œ ë°ì´í„°ë¥¼ ì£¼ê³ ë°›ëŠ”ì§€ ì•Œì•„ë³´ê² ìŠµë‹ˆë‹¤.

---

## ì œ 6ì¥: ë°ì´í„° ë©”ì‹œì§€ êµí™˜

`SELECTED` ìƒíƒœëŠ” í˜¸ìŠ¤íŠ¸ì™€ ì¥ë¹„ê°€ SECS-II ë©”ì‹œì§€ë¥¼ ììœ ë¡­ê²Œ êµí™˜í•  ìˆ˜ ìˆëŠ” ë‹¨ê³„ì…ë‹ˆë‹¤. HSMSëŠ” ì´ SECS-II ë©”ì‹œì§€ë¥¼ ì•ˆì •ì ìœ¼ë¡œ ì „ë‹¬í•˜ëŠ” ì—­í• ì„ í•©ë‹ˆë‹¤.

### 6.1 HSMS ë©”ì‹œì§€ êµ¬ì¡°

HSMSë¥¼ í†µí•´ ì „ì†¡ë˜ëŠ” ëª¨ë“  ë©”ì‹œì§€ëŠ” **í—¤ë”(Header)**ì™€ **ë°”ë””(Body)** ë‘ ë¶€ë¶„ìœ¼ë¡œ êµ¬ì„±ë©ë‹ˆë‹¤.

- **Header (10 bytes)**: ë©”ì‹œì§€ì˜ ì¢…ë¥˜, ê¸¸ì´, ê·¸ë¦¬ê³  ê°€ì¥ ì¤‘ìš”í•œ **'ì‹œìŠ¤í…œ ë°”ì´íŠ¸(System Bytes)'**ì™€ ê°™ì€ ì œì–´ ì •ë³´ë¥¼ ë‹´ê³  ìˆìŠµë‹ˆë‹¤. í—¤ë”ëŠ” í•­ìƒ 10ë°”ì´íŠ¸ì˜ ê³ ì •ëœ í¬ê¸°ë¥¼ ê°€ì§‘ë‹ˆë‹¤.
    
- **Body (Variable length)**: ì‹¤ì œ ì£¼ê³ ë°›ê³ ì í•˜ëŠ” ë‚´ìš©, ì¦‰ **SECS-II ë©”ì‹œì§€**ê°€ ì´ ë¶€ë¶„ì— ë‹´ê¹ë‹ˆë‹¤. ë©”ì‹œì§€ì˜ ë‚´ìš©ì— ë”°ë¼ í¬ê¸°ê°€ ë‹¬ë¼ì§ˆ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
    

ë§ˆì¹˜ í¸ì§€ ë´‰íˆ¬(Header)ì— í¸ì§€ì§€(Body)ë¥¼ ë„£ì–´ ë³´ë‚´ëŠ” ê²ƒê³¼ ê°™ìŠµë‹ˆë‹¤. ìˆ˜ì‹ ìëŠ” ë´‰íˆ¬ë¥¼ ë³´ê³  ëˆ„ê°€ ë³´ëƒˆê³  ì–´ë–¤ ì¢…ë¥˜ì˜ í¸ì§€ì¸ì§€ íŒŒì•…í•œ í›„, ì•ˆì˜ í¸ì§€ì§€ë¥¼ ì½ê²Œ ë©ë‹ˆë‹¤.

---

### 6.2 [Active] ë©”ì‹œì§€ ì†¡ì‹ ê³¼ T3 íƒ€ì´ë¨¸

Active Role(í˜¸ìŠ¤íŠ¸)ì´ ì¥ë¹„ì—ê²Œ ë°ì´í„°ë¥¼ ìš”ì²­í•˜ê±°ë‚˜ ëª…ë ¹ì„ ë‚´ë¦¬ëŠ” ë©”ì‹œì§€ë¥¼ ë³´ë‚¼ ë•Œ, ëŒ€ë¶€ë¶„ ì‘ë‹µì„ ê¸°ëŒ€í•©ë‹ˆë‹¤.

- **ë©”ì‹œì§€ ì „ì†¡**: í˜¸ìŠ¤íŠ¸ëŠ” ì¥ë¹„ì—ê²Œ ìš”ì²­ ë©”ì‹œì§€(ì˜ˆ: `S1F13`, í†µì‹  ìˆ˜ë¦½ ìš”ì²­)ë¥¼ ë³´ëƒ…ë‹ˆë‹¤. ì´ë•Œ, ì´ ìš”ì²­ì„ ì‹ë³„í•˜ê¸° ìœ„í•œ ê³ ìœ í•œ **ì‹œìŠ¤í…œ ë°”ì´íŠ¸(System Bytes)** ê°’ì„ í—¤ë”ì— í¬í•¨ì‹œí‚µë‹ˆë‹¤.
    
- **T3 íƒ€ì´ë¨¸ ì‹œì‘**: ì‘ë‹µì´ í•„ìš”í•œ ë©”ì‹œì§€ë¥¼ ë³´ë‚¸ ì§í›„, í˜¸ìŠ¤íŠ¸ëŠ” **T3 (Reply Timeout)** íƒ€ì´ë¨¸ë¥¼ ì‘ë™ì‹œí‚µë‹ˆë‹¤. ì´ëŠ” "ì´ ì‹œê°„ ì•ˆì— ì‘ë‹µì´ ì˜¤ì§€ ì•Šìœ¼ë©´ ë¬¸ì œê°€ ìˆëŠ” ê²ƒì´ë‹¤"ë¼ê³  íŒë‹¨í•˜ëŠ” ê¸°ì¤€ ì‹œê°„ì…ë‹ˆë‹¤.
    
- **ì‘ë‹µ ìˆ˜ì‹ **: T3 íƒ€ì´ë¨¸ê°€ ë§Œë£Œë˜ê¸° ì „ì— ì¥ë¹„ë¡œë¶€í„° ì‘ë‹µ ë©”ì‹œì§€(ì˜ˆ: `S1F14`)ê°€ ë„ì°©í•˜ë©´, í˜¸ìŠ¤íŠ¸ëŠ” í—¤ë”ì˜ ì‹œìŠ¤í…œ ë°”ì´íŠ¸ ê°’ì„ í™•ì¸í•˜ì—¬ ì–´ë–¤ ìš”ì²­ì— ëŒ€í•œ ì‘ë‹µì¸ì§€ íŒŒì•…í•˜ê³  íŠ¸ëœì­ì…˜ì„ ì„±ê³µì ìœ¼ë¡œ ë§ˆì¹©ë‹ˆë‹¤.
    

---

### 6.3 [Passive] ë©”ì‹œì§€ ìˆ˜ì‹ ê³¼ ì‘ë‹µ

Passive Role(ì¥ë¹„)ì€ í˜¸ìŠ¤íŠ¸ë¡œë¶€í„° ë©”ì‹œì§€ë¥¼ ìˆ˜ì‹ í•˜ê³  ê·¸ì— ë§ê²Œ ë™ì‘í•©ë‹ˆë‹¤.

- **ë©”ì‹œì§€ ìˆ˜ì‹ **: í˜¸ìŠ¤íŠ¸ë¡œë¶€í„° ë©”ì‹œì§€ë¥¼ ë°›ìœ¼ë©´, ë¨¼ì € í—¤ë”ë¥¼ ë¶„ì„í•˜ì—¬ ë©”ì‹œì§€ì˜ ì¢…ë¥˜ì™€ ê¸¸ì´ë¥¼ íŒŒì•…í•˜ê³ , Bodyì— ë‹´ê¸´ SECS-II ë©”ì‹œì§€ë¥¼ í•´ì„í•©ë‹ˆë‹¤.
    
- **ìš”ì²­ ì²˜ë¦¬**: ìˆ˜ì‹ í•œ ë©”ì‹œì§€ì˜ ë‚´ìš©ì— ë”°ë¼ ì¥ë¹„ëŠ” íŠ¹ì • ë™ì‘ì„ ìˆ˜í–‰í•©ë‹ˆë‹¤. (ì˜ˆ: ë°ì´í„° ìˆ˜ì§‘, ìƒíƒœ ë³€ê²½ ë“±)
    
- **ì‘ë‹µ ìƒì„±**: ì‘ë‹µì´ í•„ìš”í•œ ë©”ì‹œì§€ì˜€ë‹¤ë©´, ì¥ë¹„ëŠ” ì²˜ë¦¬ ê²°ê³¼ë¥¼ ë‹´ì€ ì‘ë‹µ SECS-II ë©”ì‹œì§€ë¥¼ ìƒì„±í•©ë‹ˆë‹¤. ì´ë•Œ **ê°€ì¥ ì¤‘ìš”í•œ ê·œì¹™**ì€, ì‘ë‹µ ë©”ì‹œì§€ í—¤ë”ì˜ **ì‹œìŠ¤í…œ ë°”ì´íŠ¸** ê°’ì„ ìˆ˜ì‹ í–ˆë˜ ìš”ì²­ ë©”ì‹œì§€ì˜ ì‹œìŠ¤í…œ ë°”ì´íŠ¸ ê°’ê³¼ **ë°˜ë“œì‹œ ë™ì¼í•˜ê²Œ** ì„¤ì •í•´ì•¼ í•œë‹¤ëŠ” ê²ƒì…ë‹ˆë‹¤.
    

---

### 6.4 ì‹œìŠ¤í…œ ë°”ì´íŠ¸(System Bytes)ì™€ íŠ¸ëœì­ì…˜

**ì‹œìŠ¤í…œ ë°”ì´íŠ¸**ëŠ” HSMS í†µì‹ ì—ì„œ **íŠ¸ëœì­ì…˜(Transaction)ì„ ì‹ë³„í•˜ëŠ” í•µì‹¬ì ì¸ ì—­í• **ì„ í•©ë‹ˆë‹¤. ğŸ¤

í˜¸ìŠ¤íŠ¸ëŠ” ë™ì‹œì— ì—¬ëŸ¬ ìš”ì²­ì„ ë³´ë‚¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´, "í˜„ì¬ ìƒíƒœ ì•Œë ¤ì¤˜"(`S1F3`)ë¼ëŠ” ìš”ì²­ê³¼ "A ë ˆì‹œí”¼ ì •ë³´ ì¤˜"(`S7F5`)ë¼ëŠ” ìš”ì²­ì„ ê±°ì˜ ë™ì‹œì— ë³´ëƒˆë‹¤ê³  ê°€ì •í•´ ë´…ì‹œë‹¤. ì ì‹œ í›„ ì¥ë¹„ë¡œë¶€í„° `S1F4`ì™€ `S7F6`ë¼ëŠ” ë‘ ê°œì˜ ì‘ë‹µì´ ë„ì°©í–ˆì„ ë•Œ, í˜¸ìŠ¤íŠ¸ëŠ” ì–´ë–¤ ì‘ë‹µì´ ì–´ë–¤ ìš”ì²­ì— ëŒ€í•œ ê²ƒì¸ì§€ êµ¬ë¶„í•´ì•¼ í•©ë‹ˆë‹¤.

ì´ë•Œ ì‚¬ìš©ë˜ëŠ” ê²ƒì´ ë°”ë¡œ **ì‹œìŠ¤í…œ ë°”ì´íŠ¸**ì…ë‹ˆë‹¤. í˜¸ìŠ¤íŠ¸ëŠ” ê° ìš”ì²­ì— ê³ ìœ í•œ ì‹œìŠ¤í…œ ë°”ì´íŠ¸(ì˜ˆ: `0x0001`, `0x0002`)ë¥¼ ë¶€ì—¬í•˜ê³ , ì¥ë¹„ëŠ” ì‘ë‹µ ì‹œ í•´ë‹¹ ì‹œìŠ¤í…œ ë°”ì´íŠ¸ë¥¼ ê·¸ëŒ€ë¡œ ëŒë ¤ì£¼ê¸° ë•Œë¬¸ì— í˜¸ìŠ¤íŠ¸ëŠ” ìš”ì²­ê³¼ ì‘ë‹µì„ ì •í™•í•˜ê²Œ ì§ì§€ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.


---

## ì œ 7ì¥: í†µì‹  ì±„ë„ ìƒíƒœ ê´€ë¦¬ (Health Check)

`SELECTED` ìƒíƒœì—ì„œ í•œë™ì•ˆ ë°ì´í„° êµí™˜ì´ ì—†ëŠ” ê²½ìš°, í˜¸ìŠ¤íŠ¸ì™€ ì¥ë¹„ëŠ” ì„œë¡œì˜ ì—°ê²°ì´ ì•„ì§ ìœ íš¨í•œì§€ ê¶ê¸ˆí•´í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë„¤íŠ¸ì›Œí¬ ì¼€ì´ë¸”ì´ ë¬¼ë¦¬ì ìœ¼ë¡œ ë½‘í˜”ì§€ë§Œ TCP/IP ì„¸ì…˜ì€ ì•„ì§ ì‚´ì•„ìˆëŠ” ê²ƒì²˜ëŸ¼ ë³´ì´ëŠ” ì• ë§¤í•œ ìƒí™©ë„ ë°œìƒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ğŸ”Œ

ì´ëŸ´ ë•Œ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ ë°”ë¡œ **`Linktest`**ì…ë‹ˆë‹¤. `Linktest`ëŠ” ì£¼ê¸°ì ìœ¼ë¡œ "ê±°ê¸° ì˜ ìˆë‚˜ìš”?"ë¼ê³  ë¬¼ì–´ë³´ë©° í†µì‹  ì±„ë„ì˜ ê±´ê°• ìƒíƒœë¥¼ í™•ì¸í•˜ëŠ” ì ˆì°¨ì…ë‹ˆë‹¤.

### 7.1 `Linktest.req` / `Linktest.rsp`ì˜ ëª©ì 

- **`Linktest.req` (ìš”ì²­)**: "ì´ ë©”ì‹œì§€ë¥¼ ë°›ìœ¼ë©´ ì¦‰ì‹œ ì‘ë‹µí•´ ì£¼ì„¸ìš”"ë¼ëŠ” ì˜ë¯¸ë¥¼ ê°€ì§„ ì œì–´ ë©”ì‹œì§€ì…ë‹ˆë‹¤.
    
- **`Linktest.rsp` (ì‘ë‹µ)**: `Linktest.req`ë¥¼ ë°›ì€ ìª½ì´ "ë„¤, ì˜ ë°›ì•˜ìŠµë‹ˆë‹¤. í†µì‹ ì— ë¬¸ì œì—†ìŠµë‹ˆë‹¤"ë¼ê³  íšŒì‹ í•˜ëŠ” ì œì–´ ë©”ì‹œì§€ì…ë‹ˆë‹¤.
    

ì´ ê°„ë‹¨í•œ ìš”ì²­ê³¼ ì‘ë‹µ ì ˆì°¨ë¥¼ í†µí•´, ì–‘ì¸¡ì€ í†µì‹  ê²½ë¡œì— ë¬¸ì œê°€ ì—†ëŠ”ì§€, ê·¸ë¦¬ê³  ìƒëŒ€ë°©ì˜ HSMS ì• í”Œë¦¬ì¼€ì´ì…˜ì´ ì •ìƒì ìœ¼ë¡œ ë™ì‘í•˜ê³  ìˆëŠ”ì§€ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

### 7.2 [Active] ê´€ì ì—ì„œì˜ Health Check

ì¼ë°˜ì ìœ¼ë¡œ **Health Checkì˜ ì£¼ì²´ëŠ” Active Role(í˜¸ìŠ¤íŠ¸)**ì…ë‹ˆë‹¤. í˜¸ìŠ¤íŠ¸ëŠ” í†µì‹  ì„¸ì…˜ì´ ìœ íœ´(Idle) ìƒíƒœì¼ ë•Œ ì£¼ê¸°ì ìœ¼ë¡œ `Linktest`ë¥¼ ìˆ˜í–‰í•©ë‹ˆë‹¤.

1. **íƒ€ì´ë¨¸ ê¸°ë°˜ ì „ì†¡**: í˜¸ìŠ¤íŠ¸ëŠ” ë§ˆì§€ë§‰ìœ¼ë¡œ ë©”ì‹œì§€ë¥¼ ì£¼ê³ ë°›ì€ ì‹œì ë¶€í„° íŠ¹ì • ì‹œê°„(ë³´í†µ **T6 Timeout**ì˜ ì ˆë°˜ ì •ë„)ì´ ì§€ë‚˜ë©´ `Linktest.req`ë¥¼ ì¥ë¹„ë¡œ ì „ì†¡í•©ë‹ˆë‹¤.
    
2. **ì‘ë‹µ ëŒ€ê¸°**: `Linktest.req`ë¥¼ ë³´ë‚¸ í›„, í˜¸ìŠ¤íŠ¸ëŠ” **T6 (Control Transaction Timeout)** íƒ€ì´ë¨¸ë¥¼ ì‘ë™ì‹œì¼œ ì‘ë‹µì„ ê¸°ë‹¤ë¦½ë‹ˆë‹¤.
    
3. **ì‘ë‹µ í™•ì¸**: T6 ì‹œê°„ ë‚´ì— `Linktest.rsp`ê°€ ë„ì°©í•˜ë©´, í˜¸ìŠ¤íŠ¸ëŠ” í†µì‹  ì±„ë„ì´ ì •ìƒì´ë¼ê³  íŒë‹¨í•˜ê³  ë‹¤ìŒ ì£¼ê¸°ë¥¼ ê¸°ë‹¤ë¦½ë‹ˆë‹¤.
    
4. **ì‹¤íŒ¨ ì²˜ë¦¬**: ë§Œì•½ T6 ì‹œê°„ ë‚´ì— ì‘ë‹µì´ ì˜¤ì§€ ì•Šìœ¼ë©´, í˜¸ìŠ¤íŠ¸ëŠ” í†µì‹  ì±„ë„ì— ì‹¬ê°í•œ ë¬¸ì œê°€ ë°œìƒí–ˆë‹¤ê³  ê°„ì£¼í•˜ê³  **ìŠ¤ìŠ¤ë¡œ TCP/IP ì—°ê²°ì„ ëŠìŠµë‹ˆë‹¤.** ê·¸ í›„, ì •í•´ì§„ ì¬ì—°ê²° ë¡œì§ì— ë”°ë¼ ë‹¤ì‹œ ì—°ê²°ì„ ì‹œë„í•˜ê²Œ ë©ë‹ˆë‹¤.
    

### 7.3 [Passive] ê´€ì ì—ì„œì˜ Health Check

Passive Role(ì¥ë¹„)ì€ Health Checkë¥¼ ì£¼ë„í•˜ì§€ ì•Šê³ , Active Roleì˜ ìš”ì²­ì— ì‘ë‹µí•˜ëŠ” ì—­í• ì„ í•©ë‹ˆë‹¤.

1. **`Linktest.req` ìˆ˜ì‹ **: í˜¸ìŠ¤íŠ¸ë¡œë¶€í„° `Linktest.req` ë©”ì‹œì§€ë¥¼ ë°›ìŠµë‹ˆë‹¤.
    
2. **ì¦‰ì‹œ ì‘ë‹µ**: ìˆ˜ì‹  ì¦‰ì‹œ, ë³„ë‹¤ë¥¸ ì²˜ë¦¬ ì—†ì´ `Linktest.rsp` ë©”ì‹œì§€ë¥¼ ìƒì„±í•˜ì—¬ í˜¸ìŠ¤íŠ¸ì—ê²Œ ë³´ëƒ…ë‹ˆë‹¤.
    

ì¥ë¹„ ì…ì¥ì—ì„œ `Linktest`ëŠ” ë§¤ìš° ê°„ë‹¨í•œ ë™ì‘ì´ì§€ë§Œ, ì´ë¥¼ í†µí•´ ìì‹ ì´ í†µì‹  ê°€ëŠ¥í•œ ìƒíƒœì„ì„ í˜¸ìŠ¤íŠ¸ì—ê²Œ ì•Œë ¤ì£¼ëŠ” ì¤‘ìš”í•œ ì—­í• ì„ í•©ë‹ˆë‹¤.

---

## ì œ 8ì¥: [Passive Role] ì£¼ìš” ì˜ˆì™¸ ì²˜ë¦¬ ê°€ì´ë“œ

Passive Roleì¸ ì¥ë¹„ëŠ” ì–¸ì œë‚˜ ì•ˆì •ì ìœ¼ë¡œ ë™ì‘í•˜ë©° ë¹„ì •ìƒì ì¸ ìš”ì²­ì´ë‚˜ ìƒí™©ì—ë„ ì‹œìŠ¤í…œì´ ì¤‘ë‹¨ë˜ì§€ ì•Šë„ë¡ ê²¬ê³ í•˜ê²Œ ì„¤ê³„ë˜ì–´ì•¼ í•©ë‹ˆë‹¤. ë‹¤ìŒì€ ì¥ë¹„ê°€ ê²ªì„ ìˆ˜ ìˆëŠ” ì£¼ìš” ì˜ˆì™¸ ìƒí™©ê³¼ ê¶Œì¥ë˜ëŠ” ì²˜ë¦¬ ë°©ë²•ì…ë‹ˆë‹¤.

---

### 8.1 ìƒí™©: `Select.req`ê°€ ì˜¤ì§€ ì•ŠëŠ” ê²½ìš°

ìƒí™©

í˜¸ìŠ¤íŠ¸(Active Role)ê°€ TCP/IP ì—°ê²°(Connect)ì—ëŠ” ì„±ê³µí–ˆì§€ë§Œ, ê·¸ ì´í›„ ì•„ë¬´ëŸ° ë©”ì‹œì§€ë„ ë³´ë‚´ì§€ ì•Šê³ , íŠ¹íˆ HSMS ì„¸ì…˜ì„ ì‹œì‘í•˜ê¸° ìœ„í•œ Select.req ë©”ì‹œì§€ë¥¼ ë³´ë‚´ì§€ ì•ŠëŠ” ê²½ìš°ì…ë‹ˆë‹¤.

ë¬¸ì œì 

ì¥ë¹„ëŠ” ì´ ì—°ê²°ì´ ìœ íš¨í•œì§€, ì•„ë‹ˆë©´ ê·¸ëƒ¥ ì—°ê²°ë§Œ ëœ ì±„ë¡œ ë°©ì¹˜ëœ 'ìœ ë ¹' ì—°ê²°ì¸ì§€ ì•Œ ìˆ˜ ì—†ìŠµë‹ˆë‹¤. ì´ëŸ° ì—°ê²°ì„ ë¬´í•œì • ìœ ì§€í•˜ë©´ ì‹œìŠ¤í…œ ìì›(ì†Œì¼“, ë©”ëª¨ë¦¬ ë“±)ì´ ë‚­ë¹„ë©ë‹ˆë‹¤.

**ê¶Œì¥ ì¡°ì¹˜**

- **ìì²´ íƒ€ì„ì•„ì›ƒ ì„¤ì •**: TCP/IP ì—°ê²°ì´ ìˆ˜ë½ëœ (`Accept`) í›„, `NOT_SELECTED` ìƒíƒœì—ì„œ ì¼ì • ì‹œê°„(ì˜ˆ: í˜¸ìŠ¤íŠ¸ì˜ T7ê³¼ ìœ ì‚¬í•˜ê²Œ 10~15ì´ˆ) ë‚´ì— `Select.req`ê°€ ë„ì°©í•˜ì§€ ì•Šìœ¼ë©´, ì¥ë¹„ëŠ” **ìŠ¤ìŠ¤ë¡œ í•´ë‹¹ TCP/IP ì—°ê²°ì„ ëŠì–´ì•¼ í•©ë‹ˆë‹¤.**
    
- **ìƒíƒœ ë³µê·€**: ì—°ê²°ì„ ëŠì€ í›„, ë‹¤ì‹œ ë‹¤ë¥¸ í˜¸ìŠ¤íŠ¸ì˜ ì—°ê²° ìš”ì²­ì„ ë°›ì„ ìˆ˜ ìˆë„ë¡ `Listen` ìƒíƒœë¡œ ëŒì•„ê°‘ë‹ˆë‹¤.
    

---

### 8.2 ìƒí™©: `SELECTED` ìƒíƒœì—ì„œ ë‹¤ë¥¸ `Select.req` ìˆ˜ì‹ 

ìƒí™©

ì´ë¯¸ íŠ¹ì • í˜¸ìŠ¤íŠ¸ì™€ ì„±ê³µì ìœ¼ë¡œ SELECTED ìƒíƒœì— ì§„ì…í•˜ì—¬ í†µì‹  ì¤‘ì¸ë°, ë™ì¼í•œ ì—°ê²°ì„ í†µí•´ ë˜ ë‹¤ë¥¸ Select.reqê°€ ì˜¤ê±°ë‚˜ í˜¹ì€ ë‹¤ë¥¸ í˜¸ìŠ¤íŠ¸ê°€ ìƒˆë¡œìš´ ì—°ê²°ì„ ë§ºê³  Select.reqë¥¼ ë³´ë‚´ëŠ” ê²½ìš°ì…ë‹ˆë‹¤.

ë¬¸ì œì 

ì´ëŠ” ëª…ë°±í•œ í”„ë¡œí† ì½œ ìœ„ë°˜ì…ë‹ˆë‹¤. ì¥ë¹„ëŠ” í•œ ë²ˆì— í•˜ë‚˜ì˜ ì œì–´ í˜¸ìŠ¤íŠ¸ì™€ í†µì‹  ì„¸ì…˜ì„ ìœ ì§€í•˜ëŠ” ê²ƒì´ ì¼ë°˜ì ì…ë‹ˆë‹¤. ì´ ìš”ì²­ì„ ìˆ˜ë½í•˜ë©´ ê¸°ì¡´ í†µì‹ ì´ ì—‰ë§ì´ ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

**ê¶Œì¥ ì¡°ì¹˜**

- **ìš”ì²­ ê±°ì ˆ**: ìƒˆë¡œìš´ `Select.req` ìš”ì²­ì— ëŒ€í•´ "ì´ë¯¸ `SELECTED` ìƒíƒœì„"ì„ ì˜ë¯¸í•˜ëŠ” **ì‹¤íŒ¨ ì½”ë“œ**ë¥¼ ë‹´ì•„ `Select.rsp`ë¥¼ ë³´ëƒ…ë‹ˆë‹¤.
    
- **ê¸°ì¡´ ì„¸ì…˜ ìœ ì§€**: ê¸°ì¡´ì— ì—°ê²°ë˜ì–´ ìˆë˜ í˜¸ìŠ¤íŠ¸ì™€ì˜ `SELECTED` ìƒíƒœëŠ” ê·¸ëŒ€ë¡œ **ìœ ì§€í•´ì•¼ í•©ë‹ˆë‹¤.**
    

---

### 8.3 ìƒí™©: í†µì‹  ì¤‘ TCP/IP ì—°ê²°ì´ ê°‘ìê¸° ëŠì–´ì§€ëŠ” ê²½ìš°

ìƒí™©

Separate.reqì™€ ê°™ì€ ì •ìƒì ì¸ ì¢…ë£Œ ì ˆì°¨ ì—†ì´, ë„¤íŠ¸ì›Œí¬ ì¥ì• ë‚˜ í˜¸ìŠ¤íŠ¸ì˜ ë¹„ì •ìƒ ì¢…ë£Œë¡œ ì¸í•´ TCP/IP ì—°ê²°ì´ ì˜ˆê³  ì—†ì´ ëŠì–´ì§€ëŠ” ê²½ìš°ì…ë‹ˆë‹¤.

ë¬¸ì œì 

ì¥ë¹„ëŠ” í˜¸ìŠ¤íŠ¸ì™€ì˜ í†µì‹ ì´ ë¶ˆê°€ëŠ¥í•´ì¡ŒìŒì„ ì¸ì§€í•˜ê³ , ê´€ë ¨ ìì›ì„ ì •ë¦¬í•œ í›„ ìƒˆë¡œìš´ ì—°ê²°ì„ ë§ì´í•  ì¤€ë¹„ë¥¼ í•´ì•¼ í•©ë‹ˆë‹¤.

**ê¶Œì¥ ì¡°ì¹˜**

- **ìƒíƒœ ì „í™˜**: ìš´ì˜ì²´ì œë¡œë¶€í„° ì—°ê²° ì¢…ë£Œë¥¼ ê°ì§€í•˜ëŠ” ì¦‰ì‹œ, ìƒíƒœë¥¼ `NOT_CONNECTED`ë¡œ ë³€ê²½í•©ë‹ˆë‹¤.
    
- **ìì› í•´ì œ**: í•´ë‹¹ í†µì‹ ì— ì‚¬ìš©ë˜ë˜ ì†Œì¼“ê³¼ ë©”ëª¨ë¦¬ ë“±ì˜ ìì›ì„ ê¹¨ë—í•˜ê²Œ í•´ì œí•©ë‹ˆë‹¤.
    
- **ë¡œê·¸ ê¸°ë¡**: ì–¸ì œ, ì–´ë–¤ í˜¸ìŠ¤íŠ¸ì™€ì˜ ì—°ê²°ì´ ë¹„ì •ìƒì ìœ¼ë¡œ ì¢…ë£Œë˜ì—ˆëŠ”ì§€ ë¡œê·¸ë¥¼ ë‚¨ê²¨ ë¬¸ì œ ì¶”ì ì„ ìš©ì´í•˜ê²Œ í•©ë‹ˆë‹¤.
    

---

### 8.4 ìƒí™©: ì˜ëª»ëœ í˜•ì‹ì˜ HSMS ë©”ì‹œì§€ë¥¼ ìˆ˜ì‹ í•œ ê²½ìš°

ìƒí™©

ìˆ˜ì‹ í•œ ë©”ì‹œì§€ì˜ í—¤ë” ì •ë³´ê°€ í‘œì¤€ê³¼ ë§ì§€ ì•Šê±°ë‚˜(ì˜ˆ: ê¸¸ì´ê°€ 10ë°”ì´íŠ¸ê°€ ì•„ë‹˜), í—¤ë”ì— ëª…ì‹œëœ ë©”ì‹œì§€ ê¸¸ì´ì™€ ì‹¤ì œ ìˆ˜ì‹ í•œ ë°ì´í„°ì˜ ê¸¸ì´ê°€ ë‹¤ë¥¸ ê²½ìš°ì…ë‹ˆë‹¤.

ë¬¸ì œì 

ì˜ëª»ëœ ë©”ì‹œì§€ë¥¼ ì²˜ë¦¬í•˜ë ¤ê³  ì‹œë„í•˜ë©´ í”„ë¡œê·¸ë¨ì— ì˜¤ë¥˜ê°€ ë°œìƒí•˜ê±°ë‚˜ ì‹œìŠ¤í…œì´ ë©ˆì¶œ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ğŸ›

**ê¶Œì¥ ì¡°ì¹˜**

- **ë©”ì‹œì§€ íê¸°**: í•´ë‹¹ ë©”ì‹œì§€ëŠ” ì²˜ë¦¬í•˜ì§€ ì•Šê³  ì¦‰ì‹œ íê¸°í•©ë‹ˆë‹¤.
    
- **ì˜¤ë¥˜ ë¡œê·¸ ê¸°ë¡**: ì–´ë–¤ í˜¸ìŠ¤íŠ¸ë¡œë¶€í„° ì–´ë–¤ ì¢…ë¥˜ì˜ ì˜ëª»ëœ ë©”ì‹œì§€ê°€ ìˆ˜ì‹ ë˜ì—ˆëŠ”ì§€ ìƒì„¸í•œ ë¡œê·¸ë¥¼ ë‚¨ê¹ë‹ˆë‹¤.
    
- **ì‘ë‹µí•˜ì§€ ì•ŠìŒ**: ì¼ë°˜ì ìœ¼ë¡œ ì´ëŸ° ê²½ìš° ì‘ë‹µ ë©”ì‹œì§€ë¥¼ ë³´ë‚´ì§€ ì•ŠìŠµë‹ˆë‹¤. ì‘ë‹µì„ ë³´ë‚´ëŠ” ê²ƒ ìì²´ê°€ ë˜ ë‹¤ë¥¸ ë¬¸ì œë¥¼ ì•¼ê¸°í•  ìˆ˜ ìˆê¸° ë•Œë¬¸ì…ë‹ˆë‹¤.
    

## ì œ 9ì¥: [Active Role] ì£¼ìš” ì˜ˆì™¸ ì²˜ë¦¬ ê°€ì´ë“œ

Active Roleì¸ í˜¸ìŠ¤íŠ¸ëŠ” í†µì‹ ì˜ ì‹œì‘ê³¼ ìœ ì§€ë¥¼ ì±…ì„ì§€ê¸° ë•Œë¬¸ì—, ë‹¤ì–‘í•œ ì‹¤íŒ¨ ìƒí™©ì— ëŒ€ë¹„í•œ **ì¬ì‹œë„(Retry)** ë° **ì˜¤ë¥˜ ì²˜ë¦¬(Error Handling)** ë¡œì§ì„ ê°–ì¶”ëŠ” ê²ƒì´ ë§¤ìš° ì¤‘ìš”í•©ë‹ˆë‹¤.

---

### 9.1 ìƒí™©: `Connect` ì‹¤íŒ¨ ì‹œ ì¬ì‹œë„ ì „ëµ

ìƒí™©

ì¥ë¹„ì˜ IP/Portë¡œ TCP/IP ì—°ê²°(Connect)ì„ ì‹œë„í–ˆìœ¼ë‚˜ ì‹¤íŒ¨í•˜ëŠ” ê²½ìš°ì…ë‹ˆë‹¤. ì›ì¸ì€ ì¥ë¹„ì˜ ì „ì›ì´ êº¼ì ¸ ìˆê±°ë‚˜, ë„¤íŠ¸ì›Œí¬ ë¬¸ì œ, ì„¤ì • ì˜¤ë¥˜ ë“± ë‹¤ì–‘í•©ë‹ˆë‹¤.

ë¬¸ì œì 

í•œ ë²ˆì˜ ì‹¤íŒ¨ë¡œ í†µì‹ ì„ í¬ê¸°í•˜ë©´ ì¥ë¹„ê°€ ì •ìƒ ìƒíƒœê°€ ë˜ì–´ë„ ì˜êµ¬íˆ í†µì‹ ì´ ë‹¨ì ˆë©ë‹ˆë‹¤. í˜¸ìŠ¤íŠ¸ëŠ” ì¥ë¹„ê°€ ë‹¤ì‹œ ì˜¨ë¼ì¸ ìƒíƒœê°€ ë˜ì—ˆì„ ë•Œ ìë™ìœ¼ë¡œ í†µì‹ ì„ ë³µêµ¬í•  ìˆ˜ ìˆì–´ì•¼ í•©ë‹ˆë‹¤.

**ê¶Œì¥ ì¡°ì¹˜**

- **ì£¼ê¸°ì ì¸ ì¬ì—°ê²° (Reconnection)**: `Connect` ì‹¤íŒ¨ ì‹œ, ì¦‰ì‹œ ë‹¤ì‹œ ì‹œë„í•˜ì§€ ì•Šê³  **ì¼ì • ì‹œê°„(ì˜ˆ: 5~10ì´ˆ)ì„ ëŒ€ê¸°**í•œ í›„ ì¬ì‹œë„í•˜ëŠ” ë¡œì§ì„ êµ¬í˜„í•©ë‹ˆë‹¤.
    
- **ì¬ì‹œë„ íšŸìˆ˜ ë° ë¡œê¹…**: ë¬´í•œì • ì¬ì‹œë„í•˜ê¸°ë³´ë‹¤ëŠ”, íŠ¹ì • íšŸìˆ˜ë‚˜ ì‹œê°„ ë™ì•ˆ ì‹¤íŒ¨ê°€ ì§€ì†ë˜ë©´ ìš´ì˜ìì—ê²Œ ì•Œë¦¼(Alarm)ì„ ë³´ë‚´ê³ , ëª¨ë“  ì—°ê²° ì‹œë„ì™€ ì‹¤íŒ¨ ê¸°ë¡ì„ ë¡œê·¸ë¡œ ë‚¨ê²¨ ì›ì¸ ë¶„ì„ì„ ìš©ì´í•˜ê²Œ í•©ë‹ˆë‹¤.
    

---

### 9.2 ìƒí™©: `Select.rsp` ì‘ë‹µì´ ì—†ê±°ë‚˜(T7) ì‹¤íŒ¨ ì½”ë“œë¥¼ ë°›ì€ ê²½ìš°

ìƒí™©

Connectì—ëŠ” ì„±ê³µí•˜ê³  Select.reqê¹Œì§€ ë³´ëƒˆì§€ë§Œ, ì¥ë¹„ë¡œë¶€í„° Select.rsp ì‘ë‹µì´ T7 Timeout ë‚´ì— ì˜¤ì§€ ì•Šê±°ë‚˜, "ì´ë¯¸ ì‚¬ìš© ì¤‘"ê³¼ ê°™ì€ ì‹¤íŒ¨ ì½”ë“œê°€ ë‹´ê¸´ ì‘ë‹µì„ ë°›ì€ ê²½ìš°ì…ë‹ˆë‹¤.

ë¬¸ì œì 

ì‘ë‹µì´ ì—†ëŠ” ê²ƒì€ ì¥ë¹„ì˜ HSMS ì• í”Œë¦¬ì¼€ì´ì…˜ì´ ë©ˆì·„ê±°ë‚˜ í†µì‹  ê²½ë¡œì— ë¬¸ì œê°€ ìƒê²¼ì„ ê°€ëŠ¥ì„±ì„ ì˜ë¯¸í•©ë‹ˆë‹¤. ì‹¤íŒ¨ ì½”ë“œë¥¼ ë°›ì€ ê²ƒì€ ì¥ë¹„ê°€ í˜„ì¬ í†µì‹ í•  ì¤€ë¹„ê°€ ë˜ì§€ ì•Šì•˜ë‹¤ëŠ” ëª…í™•í•œ ì‹ í˜¸ì…ë‹ˆë‹¤.

**ê¶Œì¥ ì¡°ì¹˜**

- **T7 Timeout ë°œìƒ ì‹œ**: í†µì‹  ì„¸ì…˜ ìˆ˜ë¦½ì— ì‹¤íŒ¨í•œ ê²ƒìœ¼ë¡œ ê°„ì£¼í•˜ê³ , ì¦‰ì‹œ **TCP/IP ì—°ê²°ì„ ëŠìŠµë‹ˆë‹¤.** ê·¸ í›„, ìœ„ì˜ 9.1ì—ì„œ ì„¤ëª…í•œ ì¬ì—°ê²° ë¡œì§ì— ë”°ë¼ ì²˜ìŒë¶€í„° ë‹¤ì‹œ ì—°ê²°ì„ ì‹œë„í•©ë‹ˆë‹¤.
    
- **ì‹¤íŒ¨ ì‘ë‹µ ìˆ˜ì‹  ì‹œ**: ë§ˆì°¬ê°€ì§€ë¡œ TCP/IP ì—°ê²°ì„ ëŠê³ , ì¬ì—°ê²° ë¡œì§ìœ¼ë¡œ ì „í™˜í•©ë‹ˆë‹¤. ì´ë•Œ, ì¥ë¹„ê°€ ë³´ë‚¸ ì‹¤íŒ¨ ì‚¬ìœ ë¥¼ ë¡œê·¸ì— ìƒì„¸íˆ ê¸°ë¡í•˜ì—¬ ì™œ ì„¸ì…˜ ìˆ˜ë¦½ì— ì‹¤íŒ¨í–ˆëŠ”ì§€ ëª…í™•íˆ ë‚¨ê¸°ëŠ” ê²ƒì´ ì¤‘ìš”í•©ë‹ˆë‹¤.
    

---

### 9.3 ìƒí™©: ë©”ì‹œì§€ ì „ì†¡ í›„ `Reply`ê°€ ì—†ëŠ” ê²½ìš° (T3)

ìƒí™©

SELECTED ìƒíƒœì—ì„œ ì¥ë¹„ì—ê²Œ ì‘ë‹µì´ í•„ìš”í•œ ë°ì´í„° ë©”ì‹œì§€(ì˜ˆ: S1F3)ë¥¼ ë³´ëƒˆìœ¼ë‚˜, T3 (Reply Timeout) ì‹œê°„ ë‚´ì— í•´ë‹¹ ì‘ë‹µ(ì˜ˆ: S1F4)ì´ ì˜¤ì§€ ì•ŠëŠ” ê²½ìš°ì…ë‹ˆë‹¤.

ë¬¸ì œì 

ì´ëŠ” ì¥ë¹„ê°€ í•´ë‹¹ ìš”ì²­ì„ ì²˜ë¦¬í•˜ëŠ” ë° ë¬¸ì œê°€ ìƒê²¼ê±°ë‚˜, ì‘ë‹µ ë©”ì‹œì§€ê°€ ë„¤íŠ¸ì›Œí¬ ì¤‘ê°„ì— ìœ ì‹¤ë˜ì—ˆì„ ê°€ëŠ¥ì„±ì„ ì‹œì‚¬í•©ë‹ˆë‹¤. ì´ íŠ¸ëœì­ì…˜ì€ ì‹¤íŒ¨í•œ ê²ƒìœ¼ë¡œ ê°„ì£¼í•´ì•¼ í•©ë‹ˆë‹¤.

**ê¶Œì¥ ì¡°ì¹˜**

- **íŠ¸ëœì­ì…˜ ì‹¤íŒ¨ ì²˜ë¦¬**: í•´ë‹¹ ìš”ì²­-ì‘ë‹µ íŠ¸ëœì­ì…˜ì€ ì‹¤íŒ¨í–ˆìŒì„ ëª…í™•íˆ í•˜ê³ , ê´€ë ¨ ì²˜ë¦¬(ì˜ˆ: ì‚¬ìš©ìì—ê²Œ ì•Œë¦¼, ì¬ì‹œë„ ì¤€ë¹„)ë¥¼ ìˆ˜í–‰í•©ë‹ˆë‹¤.
    
- **ì¬ì‹œë„ ì¹´ìš´íŠ¸ ê´€ë¦¬**: ë™ì¼í•œ ë©”ì‹œì§€ë¥¼ ë¬´í•œì • ì¬ì „ì†¡í•˜ë©´ ì¥ë¹„ì— ë¶€í•˜ë¥¼ ì¤„ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë³´í†µ **2~3íšŒ ì¬ì‹œë„** í›„ì—ë„ ê³„ì† ì‹¤íŒ¨í•˜ë©´, í†µì‹  ì±„ë„ ìì²´ì— ë¬¸ì œê°€ ìˆë‹¤ê³  íŒë‹¨í•˜ëŠ” ê²ƒì´ ì¢‹ìŠµë‹ˆë‹¤.
    
- **í†µì‹  ì±„ë„ ë¦¬ì…‹**: ë°˜ë³µì ì¸ T3 Timeoutì€ í†µì‹  ì±„ë„ì˜ ë¶ˆì•ˆì •ì„±ì„ ì˜ë¯¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ ê²½ìš°, í˜¸ìŠ¤íŠ¸ëŠ” í˜„ì¬ TCP/IP ì—°ê²°ì„ ê°•ì œë¡œ ëŠê³ , ì¬ì—°ê²° ë¡œì§ì— ë”°ë¼ í†µì‹ ì„ ì²˜ìŒë¶€í„° ë‹¤ì‹œ ì‹œì‘í•˜ì—¬ ì±„ë„ì„ 'ë¦¬ì…‹'í•˜ëŠ” ê²ƒì´ ì•ˆì •ì ì…ë‹ˆë‹¤.
    

---

### 9.4 ìƒí™©: í†µì‹  ì¤‘ TCP/IP ì—°ê²°ì´ ê°‘ìê¸° ëŠì–´ì§€ëŠ” ê²½ìš°

ìƒí™©

Linktest ì‹¤íŒ¨ë‚˜ ë„¤íŠ¸ì›Œí¬ ì¥ì•  ë“±ìœ¼ë¡œ ì¸í•´ SELECTED ìƒíƒœì—ì„œ ê°‘ìê¸° TCP/IP ì—°ê²°ì´ ëŠì–´ì§€ëŠ” ê²½ìš°ì…ë‹ˆë‹¤.

ë¬¸ì œì 

í˜¸ìŠ¤íŠ¸ëŠ” í†µì‹ ì´ ë¶ˆê°€ëŠ¥í•´ì¡ŒìŒì„ ì¸ì§€í•˜ê³ , ì‹ ì†í•˜ê²Œ ë³µêµ¬ë¥¼ ì‹œë„í•´ì•¼ í•©ë‹ˆë‹¤.

**ê¶Œì¥ ì¡°ì¹˜**

- **ìƒíƒœ ì „í™˜**: ì—°ê²° ë‹¨ì ˆì„ ê°ì§€í•˜ëŠ” ì¦‰ì‹œ ìƒíƒœë¥¼ `NOT_CONNECTED`ë¡œ ë³€ê²½í•©ë‹ˆë‹¤.
    
- **ì¬ì—°ê²° ë¡œì§ ì‹¤í–‰**: ì¦‰ì‹œ 9.1ì˜ ì¬ì—°ê²° ë¡œì§ì„ ê°€ë™í•˜ì—¬ í†µì‹  ë³µêµ¬ë¥¼ ì‹œë„í•©ë‹ˆë‹¤. ì—°ê²°ì´ ëŠê¸´ ì›ì¸(ì˜ˆ: Linktest T6 timeout)ì„ ë¡œê·¸ì— ëª…í™•íˆ ê¸°ë¡í•©ë‹ˆë‹¤.
    

## ì œ 10ì¥: ë¶€ë¡: Best Practice ë° ìš”ì•½

ì´ ì¥ì—ì„œëŠ” ì§€ê¸ˆê¹Œì§€ ë‹¤ë£¬ ë‚´ìš©ì„ ë°”íƒ•ìœ¼ë¡œ Activeì™€ Passiveì˜ ì—­í• ì„ í•œëˆˆì— ë¹„êµí•˜ê³ , ì•ˆì •ì ì¸ HSMS í†µì‹  í”„ë¡œê·¸ë¨ì„ ê°œë°œí•˜ê¸° ìœ„í•œ ì‹¤ìš©ì ì¸ ê¶Œì¥ ì‚¬í•­ë“¤ì„ ì •ë¦¬í•©ë‹ˆë‹¤.

### 10.1 Active vs. Passive ì—­í• ë³„ ì±…ì„ ìš”ì•½

|êµ¬ë¶„|Active Role (Host)|Passive Role (Equipment)|
|---|---|---|
|**ì£¼ìš” ì—­í• **|í†µì‹  **ìš”ì²­** ë° **ì£¼ë„** (Client)|í†µì‹  **ëŒ€ê¸°** ë° **ì‘ë‹µ** (Server)|
|**ì—°ê²°**|`Connect`ë¥¼ í†µí•´ ì—°ê²° **ì‹œë„**|`Listen`ìœ¼ë¡œ ëŒ€ê¸°í•˜ë‹¤ `Accept`ë¡œ **ìˆ˜ë½**|
|**ì„¸ì…˜ ìˆ˜ë¦½**|`Select.req`ë¥¼ **ì „ì†¡**í•˜ì—¬ ì„¸ì…˜ ì‹œì‘|`Select.req`ë¥¼ **ìˆ˜ì‹ **í•˜ê³  `Select.rsp`ë¡œ ì‘ë‹µ|
|**ë°ì´í„° êµí™˜**|ìš”ì²­ ë©”ì‹œì§€ ì „ì†¡ í›„ **T3 íƒ€ì´ë¨¸** ê´€ë¦¬|ìš”ì²­ ë©”ì‹œì§€ ìˆ˜ì‹  í›„ ì²˜ë¦¬ ë° ì‘ë‹µ|
|**ìƒíƒœ í™•ì¸**|ì£¼ê¸°ì ìœ¼ë¡œ `Linktest.req`ë¥¼ **ì „ì†¡**|`Linktest.req` ìˆ˜ì‹  ì‹œ `Linktest.rsp`ë¡œ **ì‘ë‹µ**|
|**ì—°ê²° í•´ì œ**|`Separate.req`ë¥¼ ë³´ë‚´ê³  ì—°ê²°ì„ **ëŠìŒ**|`Separate.req` ìˆ˜ì‹  í›„ ì„¸ì…˜ì„ **ì¢…ë£Œ**|
|**ì˜ˆì™¸ ì²˜ë¦¬**|ì—°ê²° ì‹¤íŒ¨ ì‹œ **ì¬ì—°ê²°** ì‹œë„|ë¹„ì •ìƒ ìš”ì²­ **ê±°ë¶€** ë° ìì› í•´ì œ|

---

### 10.2 ì•ˆì •ì ì¸ HSMS êµ¬í˜„ì„ ìœ„í•œ ê¶Œì¥ ì‚¬í•­ (Best Practices)

1. **ìƒì„¸í•œ ë¡œê¹… (Detailed Logging) âœï¸**
    
    - **ëª¨ë“  ê²ƒì„ ê¸°ë¡í•˜ì„¸ìš”**: ìƒíƒœ ë³€ê²½, ì£¼ê³ ë°›ëŠ” ëª¨ë“  ë©”ì‹œì§€(í—¤ë” ì •ë³´ í¬í•¨), íƒ€ì„ì•„ì›ƒ ë°œìƒ, ì—°ê²°/í•´ì œ ì´ë²¤íŠ¸ ë“± ì£¼ìš” ë™ì‘ì€ ë°˜ë“œì‹œ ë¡œê·¸ë¡œ ë‚¨ê²¨ì•¼ í•©ë‹ˆë‹¤. ë¬¸ì œ ë°œìƒ ì‹œ ë¡œê·¸ëŠ” ì›ì¸ì„ ì°¾ì„ ìˆ˜ ìˆëŠ” ìœ ì¼í•œ ë‹¨ì„œì…ë‹ˆë‹¤.
        
2. **ì„¤ì •ì˜ ì™¸ë¶€í™” (External Configuration)**
    
    - **í•˜ë“œì½”ë”©ì€ í”¼í•˜ì„¸ìš”**: IP ì£¼ì†Œ, Port ë²ˆí˜¸, T3/T5/T6/T7ê³¼ ê°™ì€ íƒ€ì„ì•„ì›ƒ ê°’ë“¤ì„ ì†ŒìŠ¤ ì½”ë“œì— ì§ì ‘ ì‘ì„±í•˜ì§€ ë§ˆì„¸ìš”. ë³„ë„ì˜ ì„¤ì • íŒŒì¼(ì˜ˆ: `config.ini`, `settings.xml`)ë¡œ ë¶„ë¦¬í•˜ë©´, í”„ë¡œê·¸ë¨ì„ ë‹¤ì‹œ ì»´íŒŒì¼í•˜ì§€ ì•Šê³ ë„ ì„¤ì •ì„ ì‰½ê²Œ ë³€ê²½í•  ìˆ˜ ìˆì–´ ìœ ì§€ë³´ìˆ˜ê°€ ë§¤ìš° í¸ë¦¬í•´ì§‘ë‹ˆë‹¤.
        
3. **ëª…í™•í•œ ìƒíƒœ ê´€ë¦¬ (Clear State Management)**
    
    - **ìƒíƒœ ê¸°ê³„ë¥¼ ë”°ë¥´ì„¸ìš”**: 2ì¥ì—ì„œ ë‹¤ë£¬ ìƒíƒœ ëª¨ë¸(`NOT_CONNECTED`, `SELECTED` ë“±)ì„ ì½”ë“œì— ëª…í™•í•˜ê²Œ êµ¬í˜„í•´ì•¼ í•©ë‹ˆë‹¤. í˜„ì¬ ìƒíƒœì— ë”°ë¼ í—ˆìš©ë˜ëŠ” ë™ì‘ê³¼ ê·¸ë ‡ì§€ ì•Šì€ ë™ì‘ì„ ëª…í™•íˆ êµ¬ë¶„í•˜ë©´, ì˜ˆê¸°ì¹˜ ì•Šì€ ì˜¤ë¥˜ë¥¼ í¬ê²Œ ì¤„ì¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
        
4. **ê²¬ê³ í•œ ì¬ì—°ê²° ë¡œì§ (Robust Reconnection Logic)**
    
    - **Active Roleì˜ í•„ìˆ˜ ë•ëª©ì…ë‹ˆë‹¤**: í˜¸ìŠ¤íŠ¸ëŠ” í†µì‹ ì´ ëŠì–´ì¡Œì„ ë•Œ, ì˜ì›íˆ ê¸°ë‹¤ë¦¬ëŠ” ê²ƒì´ ì•„ë‹ˆë¼ ìŠ¤ìŠ¤ë¡œ ë³µêµ¬í•  ìˆ˜ ìˆì–´ì•¼ í•©ë‹ˆë‹¤. ì—°ê²° ì‹¤íŒ¨ ì‹œ ë¬´ì‘ì • ë°”ë¡œ ì¬ì‹œë„í•˜ê¸°ë³´ë‹¤ëŠ”, ì ì°¨ ëŒ€ê¸° ì‹œê°„ì„ ëŠ˜ë ¤ê°€ëŠ” ë°©ì‹(Exponential Backoff) ë“±ì„ ë„ì…í•˜ì—¬ ë„¤íŠ¸ì›Œí¬ ë¶€í•˜ë¥¼ ì¤„ì´ëŠ” ê²ƒì´ ì¢‹ìŠµë‹ˆë‹¤.
        

---

### 10.3 ìì£¼ ë°œìƒí•˜ëŠ” ë¬¸ì œì™€ í•´ê²° ë°©ì•ˆ (FAQ)

- **Q: ì—°ê²°ì´ ìê¾¸ ëŠì–´ì ¸ìš”.**
    
    - **A:** ë¨¼ì € `Linktest`ê°€ ì–‘ì¸¡ì— ì˜¬ë°”ë¥´ê²Œ êµ¬í˜„ë˜ì—ˆëŠ”ì§€ í™•ì¸í•˜ì„¸ìš”. í˜¸ìŠ¤íŠ¸ê°€ ì£¼ê¸°ì ìœ¼ë¡œ `Linktest.req`ë¥¼ ë³´ë‚´ê³  ì¥ë¹„ê°€ `Linktest.rsp`ë¡œ ì˜ ì‘ë‹µí•˜ëŠ”ì§€ ë¡œê·¸ë¥¼ í†µí•´ ì ê²€í•´ì•¼ í•©ë‹ˆë‹¤. ë˜í•œ, ë„¤íŠ¸ì›Œí¬ ì¥ë¹„(ìŠ¤ìœ„ì¹˜, ë°©í™”ë²½)ê°€ ì¥ì‹œê°„ ìœ íœ´(Idle) ìƒíƒœì¸ TCP ì—°ê²°ì„ ê°•ì œë¡œ ëŠëŠ” ì„¤ì •ì´ ìˆëŠ”ì§€ë„ í™•ì¸í•´ ë³¼ í•„ìš”ê°€ ìˆìŠµë‹ˆë‹¤.
        
- **Q: ë©”ì‹œì§€ë¥¼ ë³´ëƒˆëŠ”ë° ì‘ë‹µì´ ì—†ìŠµë‹ˆë‹¤ (T3 Timeout).**
    
    - **A:** ì²«ì§¸, ì¥ë¹„ê°€ í•´ë‹¹ ë©”ì‹œì§€ë¥¼ ì²˜ë¦¬í•˜ëŠ” ë° ì‹œê°„ì´ ì˜¤ë˜ ê±¸ë¦¬ëŠ” ê²ƒì€ ì•„ë‹Œì§€ í™•ì¸í•˜ì„¸ìš”. ë‘˜ì§¸, ë³´ë‚¸ ë©”ì‹œì§€ì˜ SECS-II Body í˜•ì‹ì´ í‘œì¤€ì— ë§ëŠ”ì§€ ê²€í† í•´ì•¼ í•©ë‹ˆë‹¤. í˜•ì‹ì´ ì˜ëª»ë˜ë©´ ì¥ë¹„ê°€ ë©”ì‹œì§€ë¥¼ í•´ì„í•˜ì§€ ëª»í•´ ì‘ë‹µì„ ëª» ë³´ë‚¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
        
- **Q: `Connect`ëŠ” ë˜ëŠ”ë° `SELECTED` ìƒíƒœê°€ ì•ˆë¼ìš”.**
    
    - **A:** í˜¸ìŠ¤íŠ¸ê°€ `Select.req`ë¥¼ ë³´ë‚¸ í›„ T7 Timeoutì´ ë°œìƒí•˜ëŠ”ì§€ í™•ì¸í•˜ì„¸ìš”. ë§Œì•½ ê·¸ë ‡ë‹¤ë©´, ì¥ë¹„ì˜ HSMS ì• í”Œë¦¬ì¼€ì´ì…˜ì´ ì •ìƒì ìœ¼ë¡œ ë™ì‘í•˜ì§€ ì•Šê±°ë‚˜ ë°©í™”ë²½ì´ íŠ¹ì • HSMS ë©”ì‹œì§€ë¥¼ ì°¨ë‹¨í•˜ê³  ìˆì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì¥ë¹„ë¡œë¶€í„° "Already Selected"ì™€ ê°™ì€ ì‹¤íŒ¨ ì‘ë‹µì´ ì˜¨ë‹¤ë©´, ì´ë¯¸ ë‹¤ë¥¸ í˜¸ìŠ¤íŠ¸ê°€ ì¥ë¹„ì— ì—°ê²°ë˜ì–´ ìˆëŠ”ì§€ í™•ì¸í•´ì•¼ í•©ë‹ˆë‹¤.

---

### HSMS ì£¼ìš” íƒ€ì„ì•„ì›ƒ (Timeout) ìš”ì•½

| íƒ€ì„ì•„ì›ƒ   | ëª…ì¹­ (Name)                       | ì˜ë¯¸                                                       | ì—­í•                                      | ê´€ë¦¬ ì£¼ì²´ (ì£¼ë¡œ)              |
| ------ | ------------------------------- | -------------------------------------------------------- | -------------------------------------- | ----------------------- |
| **T3** | Reply Timeout                   | ìš”ì²­ ë©”ì‹œì§€ë¥¼ ë³´ë‚¸ í›„ **ì‘ë‹µ ë©”ì‹œì§€ë¥¼ ê¸°ë‹¤ë¦¬ëŠ” ìµœëŒ€ ì‹œê°„**                      | ê°œë³„ íŠ¸ëœì­ì…˜ì˜ ì„±ê³µ/ì‹¤íŒ¨ë¥¼ íŒë‹¨ (ì˜ˆ: S1F13 â†’ S1F14)  | **ë©”ì‹œì§€ ì†¡ì‹  ì¸¡** (Sender)   |
| **T5** | Connection Separation Timeout   | ì•„ë¬´ëŸ° HSMS ë©”ì‹œì§€ êµí™˜ì´ ì—†ì„ ë•Œ **ì—°ê²°ì„ ìœ ì§€í•˜ëŠ” ìµœëŒ€ ì‹œê°„**                 | ìœ ë ¹/ì¢€ë¹„ ì—°ê²°ì„ ë°©ì§€í•˜ê³  ë¹„ì •ìƒ ì„¸ì…˜ì„ ìŠ¤ìŠ¤ë¡œ ëŠëŠ” ì—­í•        | **ë©”ì‹œì§€ ìˆ˜ì‹  ì¸¡** (Receiver) |
| **T6** | Control Transaction Timeout     | `Linktest.req`ì™€ ê°™ì€ ì œì–´ ë©”ì‹œì§€ë¥¼ ë³´ë‚¸ í›„ **ì‘ë‹µì„ ê¸°ë‹¤ë¦¬ëŠ” ìµœëŒ€ ì‹œê°„**       | í†µì‹  ì±„ë„ì˜ ë¬¼ë¦¬ì /ë…¼ë¦¬ì  ì—°ê²° ìƒíƒœ(Health Check)ë¥¼ íŒë‹¨ | **Active Role** (Host)  |
| **T7** | Not Selected Timeout            | TCP ì—°ê²° í›„, `Select.req`ë¥¼ ë³´ë‚´ê³  **`Select.rsp`ë¥¼ ê¸°ë‹¤ë¦¬ëŠ” ìµœëŒ€ ì‹œê°„** | HSMS ì„¸ì…˜ ìˆ˜ë¦½ì˜ ì„±ê³µ/ì‹¤íŒ¨ë¥¼ íŒë‹¨                  | **Active Role** (Host)  |
| **T8** | Network Inter-character Timeout | í•˜ë‚˜ì˜ ì™„ì „í•œ HSMS ë©”ì‹œì§€ë¥¼ êµ¬ì„±í•˜ëŠ” **ë°ì´í„° ì¡°ê°(íŒ¨í‚·) ì‚¬ì´ì˜ ìµœëŒ€ ì§€ì—° ì‹œê°„**       | ë¶ˆì™„ì „í•˜ê±°ë‚˜ ì†ìƒëœ ë©”ì‹œì§€ì˜ ìˆ˜ì‹ ì„ ë°©ì§€í•˜ì—¬ í†µì‹  ì•ˆì •ì„± í™•ë³´     | **ë©”ì‹œì§€ ìˆ˜ì‹  ì¸¡** (Receiver) |
## ì£¼ìš” SECS-II ë©”ì‹œì§€ ìš”ì•½

SECS-II ë©”ì‹œì§€ëŠ” **Stream(S)**ê³¼ **Function(F)**ì˜ ì¡°í•©ìœ¼ë¡œ êµ¬ì„±ë˜ë©°, ê¸°ëŠ¥ë³„ë¡œ ê·¸ë£¹í™”ë˜ì–´ ìˆìŠµë‹ˆë‹¤. ë‹¤ìŒì€ ë°˜ë„ì²´ ë° ë””ìŠ¤í”Œë ˆì´ ì¥ë¹„ í†µì‹ ì—ì„œ ê°€ì¥ ì¼ë°˜ì ìœ¼ë¡œ ì‚¬ìš©ë˜ëŠ” í•µì‹¬ ë©”ì‹œì§€ë“¤ì„ í‘œë¡œ ì •ë¦¬í•œ ê²ƒì…ë‹ˆë‹¤.

---

### **S1: Equipment Status (ì¥ë¹„ ìƒíƒœ)**

ì¥ë¹„ì˜ ìƒíƒœë¥¼ ì§ˆì˜í•˜ê³  í™•ì¸í•˜ëŠ” ê¸°ë³¸ì ì¸ í†µì‹  ì±„ë„ ê²€ì¦ì— ì‚¬ìš©ë©ë‹ˆë‹¤.

|ë©”ì‹œì§€ (SxFy)|ì´ë¦„|ì—­í•  ë° ê¸°ëŠ¥|
|---|---|---|
|**S1F1 (R)**|Are You There Request|í˜¸ìŠ¤íŠ¸ê°€ ì¥ë¹„ì˜ ì˜¨ë¼ì¸ ì—¬ë¶€ë¥¼ í™•ì¸í•˜ê¸° ìœ„í•´ ë³´ë‚´ëŠ” ìš”ì²­ì…ë‹ˆë‹¤. ğŸ“¡|
|**S1F2 (S)**|On-Line Data|S1F1 ìš”ì²­ì— ëŒ€í•œ ì¥ë¹„ì˜ ì‘ë‹µìœ¼ë¡œ, ì˜¨ë¼ì¸ ìƒíƒœì„ì„ ì•Œë¦½ë‹ˆë‹¤.|
|**S1F13 (R)**|Establish Communications Request|í˜¸ìŠ¤íŠ¸ê°€ ì¥ë¹„ì™€ í†µì‹ ì„ ì‹œì‘í•˜ê² ë‹¤ê³  ê³µì‹ì ìœ¼ë¡œ ìš”ì²­í•©ë‹ˆë‹¤. ğŸ¤|
|**S1F14 (S)**|Establish Communications Acknowledge|S1F13 ìš”ì²­ì— ëŒ€í•œ ì‘ë‹µìœ¼ë¡œ, í†µì‹  ìˆ˜ë½ ì—¬ë¶€ë¥¼ íšŒì‹ í•©ë‹ˆë‹¤.|

---

### **S2: Equipment Control & Diagnostics (ì¥ë¹„ ì œì–´ ë° ì§„ë‹¨)**

í˜¸ìŠ¤íŠ¸ê°€ ì¥ë¹„ì— ì›ê²©ìœ¼ë¡œ ëª…ë ¹ì„ ë³´ë‚´ê±°ë‚˜ íŠ¹ì • ì •ë³´ë¥¼ ìš”ì²­í•  ë•Œ ì‚¬ìš©ë©ë‹ˆë‹¤.

|ë©”ì‹œì§€ (SxFy)|ì´ë¦„|ì—­í•  ë° ê¸°ëŠ¥|
|---|---|---|
|**S2F13 (R)**|Equipment Constant Request|ì¥ë¹„ê°€ ê°€ì§€ê³  ìˆëŠ” ì„¤ì •ê°’(ECID)ì„ ìš”ì²­í•©ë‹ˆë‹¤.|
|**S2F15 (R)**|New Equipment Constant Send|ì¥ë¹„ì˜ ì„¤ì •ê°’(ECID)ì„ ì›ê²©ìœ¼ë¡œ ë³€ê²½í•©ë‹ˆë‹¤.|
|**S2F31 (R)**|Date and Time Set Request|ì¥ë¹„ì˜ ì‹œìŠ¤í…œ ì‹œê°„ì„ ì„¤ì •í•˜ë„ë¡ ìš”ì²­í•©ë‹ˆë‹¤. ğŸ•’|
|**S2F41 (R)**|Remote Command Send|`START`, `STOP`, `PAUSE` ë“± ì¥ë¹„ì— ì›ê²© ëª…ë ¹ì„ ë³´ëƒ…ë‹ˆë‹¤. ğŸ•¹ï¸|
|**S2F42 (S)**|Remote Command Acknowledge|S2F41 ëª…ë ¹ì— ëŒ€í•œ ìˆ˜ì‹  ì‘ë‹µìœ¼ë¡œ, ëª…ë ¹ì˜ ìœ íš¨ì„±ì„ ì•Œë¦½ë‹ˆë‹¤.|

---

### **S5: Exception & Alarm Reporting (ì˜ˆì™¸ ë° ì•ŒëŒ ë³´ê³ )**

ì¥ë¹„ì—ì„œ ë°œìƒí•œ ì•ŒëŒì´ë‚˜ ë¹„ì •ìƒ ìƒí™©ì„ í˜¸ìŠ¤íŠ¸ì— ë³´ê³ í•  ë•Œ ì‚¬ìš©ë©ë‹ˆë‹¤.

|ë©”ì‹œì§€ (SxFy)|ì´ë¦„|ì—­í•  ë° ê¸°ëŠ¥|
|---|---|---|
|**S5F1 (S)**|Alarm Report Send|ì¥ë¹„ì— ì•ŒëŒì´ ë°œìƒí•˜ê±°ë‚˜ í•´ì œë  ë•Œ í˜¸ìŠ¤íŠ¸ë¡œ ê·¸ ë‚´ìš©ì„ ë³´ê³ í•©ë‹ˆë‹¤. ğŸš¨|
|**S5F2 (R)**|Alarm Report Acknowledge|S5F1 ë³´ê³ ì— ëŒ€í•œ ìˆ˜ì‹  ì‘ë‹µì…ë‹ˆë‹¤.|
|**S5F3 (R)**|Enable/Disable Alarm Send|í˜¸ìŠ¤íŠ¸ê°€ íŠ¹ì • ì•ŒëŒì˜ ë³´ê³  ì—¬ë¶€ë¥¼ ì„¤ì •í•©ë‹ˆë‹¤.|

---

### **S6: Data Collection Reporting (ë°ì´í„° ìˆ˜ì§‘ ë³´ê³ )**

ì¥ë¹„ì—ì„œ ë°œìƒí•˜ëŠ” ê°ì¢… ì´ë²¤íŠ¸ë‚˜ ì£¼ê¸°ì ì¸ ë°ì´í„°ë¥¼ í˜¸ìŠ¤íŠ¸ë¡œ ë³´ê³ í•˜ëŠ” í•µì‹¬ ê¸°ëŠ¥ì…ë‹ˆë‹¤.

|ë©”ì‹œì§€ (SxFy)|ì´ë¦„|ì—­í•  ë° ê¸°ëŠ¥|
|---|---|---|
|**S6F11 (S)**|Event Report Send|ê³µì • ì‹œì‘/ì¢…ë£Œ, ìƒíƒœ ë³€ê²½ ë“± ì¥ë¹„ì—ì„œ íŠ¹ì • ì´ë²¤íŠ¸(CEID)ê°€ ë°œìƒí–ˆì„ ë•Œ ê´€ë ¨ ë°ì´í„°(DV, SV)ë¥¼ ë¬¶ì–´ í˜¸ìŠ¤íŠ¸ë¡œ ë³´ê³ í•©ë‹ˆë‹¤. ğŸ“ˆ|
|**S6F12 (R)**|Event Report Acknowledge|S6F11 ë³´ê³ ì— ëŒ€í•œ ìˆ˜ì‹  ì‘ë‹µì…ë‹ˆë‹¤.|
|**S6F1 (S)**|Trace Data Send|1ì´ˆ ê°„ê²© ë“± íŠ¹ì • ì£¼ê¸°ë¡œ ìˆ˜ì§‘ë˜ëŠ” ì„¼ì„œ ë°ì´í„°(Trace Data)ë¥¼ ë³´ê³ í•©ë‹ˆë‹¤.|

---

### **S7: Process Program Management (ë ˆì‹œí”¼ ê´€ë¦¬)**

ê³µì •ì— ì‚¬ìš©ë˜ëŠ” ë ˆì‹œí”¼(Process Program)ë¥¼ ì¥ë¹„ì™€ ì£¼ê³ ë°›ì„ ë•Œ ì‚¬ìš©ë©ë‹ˆë‹¤.

|ë©”ì‹œì§€ (SxFy)|ì´ë¦„|ì—­í•  ë° ê¸°ëŠ¥|
|---|---|---|
|**S7F1 (R)**|Process Program Load Inquire|íŠ¹ì • ë ˆì‹œí”¼ë¥¼ ì¥ë¹„ë¡œ ì „ì†¡í•´ë„ ë˜ëŠ”ì§€ ë¬¸ì˜í•©ë‹ˆë‹¤.|
|**S7F3 (S)**|Process Program Send|S7F1 ë¬¸ì˜ì— 'OK' ì‘ë‹µì„ ë°›ì€ í›„, ì‹¤ì œ ë ˆì‹œí”¼ ë³¸ë¬¸ì„ ì¥ë¹„ë¡œ ì „ì†¡í•©ë‹ˆë‹¤. ğŸ“„|
|**S7F5 (R)**|Process Program Request|í˜¸ìŠ¤íŠ¸ê°€ ì¥ë¹„ì— ì €ì¥ëœ íŠ¹ì • ë ˆì‹œí”¼ë¥¼ ìš”ì²­í•©ë‹ˆë‹¤.|
|**S7F6 (S)**|Process Program Data|S7F5 ìš”ì²­ì— ëŒ€í•œ ì‘ë‹µìœ¼ë¡œ, ë ˆì‹œí”¼ ë³¸ë¬¸ì„ í˜¸ìŠ¤íŠ¸ë¡œ ì „ì†¡í•©ë‹ˆë‹¤.|
|**S7F19 (R)**|Current EPPD Request|ì¥ë¹„ì— ë“±ë¡ëœ ëª¨ë“  ë ˆì‹œí”¼ì˜ ëª©ë¡ì„ ìš”ì²­í•©ë‹ˆë‹¤.|

_(R) = Request (ìš”ì²­), (S) = Secondary (ì‘ë‹µ ë˜ëŠ” ë³´ê³ )_


``` mermaid
sequenceDiagram
    participant Host (Active Role)
    participant Equipment (Passive Role)

    %% == 1. HSMS/TCP-IP ì—°ê²° ë‹¨ê³„ == %%
    Note over Host, Equipment: 1. ë„¤íŠ¸ì›Œí¬ ì—°ê²° (HSMS/TCP-IP)
    Host->>Equipment: TCP/IP ì—°ê²° ìš”ì²­ (Connect)
    Note right of Equipment: Listen ìƒíƒœì—ì„œ ëŒ€ê¸°
    Equipment-->>Host: TCP/IP ì—°ê²° ìˆ˜ë½ (Accept)
    Host->>Equipment: HSMS ì„¸ì…˜ ìš”ì²­ (Select.req)
    Equipment-->>Host: HSMS ì„¸ì…˜ ì‘ë‹µ (Select.rsp)
    Note over Host, Equipment: HSMS 'SELECTED' ìƒíƒœ ì§„ì… âœ…

    %% == 2. SECS-II í†µì‹  ê°œì‹œ ë‹¨ê³„ == %%
    Note over Host, Equipment: 2. í†µì‹  ê°œì‹œ (SECS-II)
    Host->>Equipment: S1F13 (Establish Communication Request)
    Equipment-->>Host: S1F14 (Establish Communication Acknowledge)
    Note over Host, Equipment: SECS-II í†µì‹  ì¤€ë¹„ ì™„ë£Œ âœ…

    %% == 3. SECS-II ìƒíƒœ í™•ì¸ ë‹¨ê³„ == %%
    Note over Host, Equipment: 3. ì˜¨ë¼ì¸ ìƒíƒœ í™•ì¸ (SECS-II)
    Host->>Equipment: S1F1 (Are You There Request)
    Equipment-->>Host: S1F2 (On-Line Data)
    Note over Host, Equipment: ë°ì´í„° êµí™˜ ê°€ëŠ¥ ìƒíƒœ í™•ì¸ ì™„ë£Œ âœ…
```